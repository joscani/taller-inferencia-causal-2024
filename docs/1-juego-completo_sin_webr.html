<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.552">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>El juego completo</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="1-juego-completo_sin_webr_files/libs/clipboard/clipboard.min.js"></script>
<script src="1-juego-completo_sin_webr_files/libs/quarto-html/quarto.js"></script>
<script src="1-juego-completo_sin_webr_files/libs/quarto-html/popper.min.js"></script>
<script src="1-juego-completo_sin_webr_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="1-juego-completo_sin_webr_files/libs/quarto-html/anchor.min.js"></script>
<link href="1-juego-completo_sin_webr_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="1-juego-completo_sin_webr_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="1-juego-completo_sin_webr_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="1-juego-completo_sin_webr_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="1-juego-completo_sin_webr_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><link href="1-juego-completo_sin_webr_files/libs/htmltools-fill/fill.css" rel="stylesheet">
<script src="1-juego-completo_sin_webr_files/libs/htmlwidgets/htmlwidgets.js"></script><link href="1-juego-completo_sin_webr_files/libs/datatables-css/datatables-crosstalk.css" rel="stylesheet">
<script src="1-juego-completo_sin_webr_files/libs/datatables-binding/datatables.js"></script><script src="1-juego-completo_sin_webr_files/libs/jquery/jquery-3.6.0.min.js"></script><link href="1-juego-completo_sin_webr_files/libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="1-juego-completo_sin_webr_files/libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="1-juego-completo_sin_webr_files/libs/dt-core/js/jquery.dataTables.min.js"></script><link href="1-juego-completo_sin_webr_files/libs/crosstalk/css/crosstalk.min.css" rel="stylesheet">
<script src="1-juego-completo_sin_webr_files/libs/crosstalk/js/crosstalk.min.js"></script>
</head>
<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul class="collapse">
<li><a href="#datos" id="toc-datos" class="nav-link active" data-scroll-target="#datos">Datos</a></li>
  <li><a href="#especificar-cuesti%C3%B3n-causal" id="toc-especificar-cuestión-causal" class="nav-link" data-scroll-target="#especificar-cuesti%C3%B3n-causal">Especificar cuestión causal</a></li>
  <li><a href="#dibujar-la-asunciones" id="toc-dibujar-la-asunciones" class="nav-link" data-scroll-target="#dibujar-la-asunciones">Dibujar la asunciones</a></li>
  <li><a href="#modelar-las-asunciones" id="toc-modelar-las-asunciones" class="nav-link" data-scroll-target="#modelar-las-asunciones">Modelar las asunciones</a></li>
  <li><a href="#diagnosticar-las-asunciones" id="toc-diagnosticar-las-asunciones" class="nav-link" data-scroll-target="#diagnosticar-las-asunciones">Diagnosticar las asunciones</a></li>
  <li><a href="#estimar-el-efecto-causal" id="toc-estimar-el-efecto-causal" class="nav-link" data-scroll-target="#estimar-el-efecto-causal">Estimar el efecto causal</a></li>
  <li><a href="#an%C3%A1lisis-de-sensibilidad" id="toc-análisis-de-sensibilidad" class="nav-link" data-scroll-target="#an%C3%A1lisis-de-sensibilidad">Análisis de sensibilidad</a></li>
  <li><a href="#verdadero-dag" id="toc-verdadero-dag" class="nav-link" data-scroll-target="#verdadero-dag">Verdadero DAG</a></li>
  </ul></nav>
</div>
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">El juego completo</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><p>Veamos un ejemplo completo. No hace falta entenderlo todo. Iremos viendo luego cada parte.</p>
<p>El ejemplo viene de <a href="https://www.r-causal.org/chapters/02-whole-game">aquí</a></p>
<p>Pasos en el análisis causal.</p>
<ol type="1">
<li>Definir la pregunta causal</li>
<li>Especificar las asunciones, una forma es con un diagrama causal</li>
<li>Modelar las asunciones</li>
<li>Diagnosticar el modelo</li>
<li>Estimar el efecto causal</li>
<li>Análisis de sensibilidad</li>
</ol>
<section id="datos" class="level2"><h2 class="anchored" data-anchor-id="datos">Datos</h2>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">select(net_data, (-id))</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">1752</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">logical</td>
<td style="text-align: left;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: logical</strong></p>
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: left;">count</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">net</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.26</td>
<td style="text-align: left;">FAL: 1298, TRU: 454</td>
</tr>
<tr class="even">
<td style="text-align: left;">eligible</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.02</td>
<td style="text-align: left;">FAL: 1716, TRU: 36</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 23%">
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 6%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">net_num</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.26</td>
<td style="text-align: right;">0.44</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: left;">▇▁▁▁▃</td>
</tr>
<tr class="even">
<td style="text-align: left;">malaria_risk</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">39.67</td>
<td style="text-align: right;">15.37</td>
<td style="text-align: right;">10.0</td>
<td style="text-align: right;">28.0</td>
<td style="text-align: right;">36.0</td>
<td style="text-align: right;">50.0</td>
<td style="text-align: right;">90.0</td>
<td style="text-align: left;">▃▇▅▂▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">income</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">897.76</td>
<td style="text-align: right;">191.24</td>
<td style="text-align: right;">330.0</td>
<td style="text-align: right;">764.8</td>
<td style="text-align: right;">893.0</td>
<td style="text-align: right;">1031.0</td>
<td style="text-align: right;">1484.0</td>
<td style="text-align: left;">▁▅▇▅▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">health</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">50.21</td>
<td style="text-align: right;">19.35</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">37.0</td>
<td style="text-align: right;">50.0</td>
<td style="text-align: right;">64.0</td>
<td style="text-align: right;">100.0</td>
<td style="text-align: left;">▂▆▇▅▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">household</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.97</td>
<td style="text-align: right;">1.41</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">4.0</td>
<td style="text-align: right;">9.0</td>
<td style="text-align: left;">▇▇▂▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">temperature</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">23.93</td>
<td style="text-align: right;">4.10</td>
<td style="text-align: right;">15.6</td>
<td style="text-align: right;">20.9</td>
<td style="text-align: right;">23.8</td>
<td style="text-align: right;">27.1</td>
<td style="text-align: right;">32.2</td>
<td style="text-align: left;">▃▇▇▇▃</td>
</tr>
<tr class="odd">
<td style="text-align: left;">insecticide_resistance</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">50.08</td>
<td style="text-align: right;">14.44</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">40.0</td>
<td style="text-align: right;">50.0</td>
<td style="text-align: right;">60.0</td>
<td style="text-align: right;">95.0</td>
<td style="text-align: left;">▁▅▇▃▁</td>
</tr>
</tbody>
</table>
</div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-88a366471d8550f49194" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-88a366471d8550f49194">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612","613","614","615","616","617","618","619","620","621","622","623","624","625","626","627","628","629","630","631","632","633","634","635","636","637","638","639","640","641","642","643","644","645","646","647","648","649","650","651","652","653","654","655","656","657","658","659","660","661","662","663","664","665","666","667","668","669","670","671","672","673","674","675","676","677","678","679","680","681","682","683","684","685","686","687","688","689","690","691","692","693","694","695","696","697","698","699","700","701","702","703","704","705","706","707","708","709","710","711","712","713","714","715","716","717","718","719","720","721","722","723","724","725","726","727","728","729","730","731","732","733","734","735","736","737","738","739","740","741","742","743","744","745","746","747","748","749","750","751","752","753","754","755","756","757","758","759","760","761","762","763","764","765","766","767","768","769","770","771","772","773","774","775","776","777","778","779","780","781","782","783","784","785","786","787","788","789","790","791","792","793","794","795","796","797","798","799","800","801","802","803","804","805","806","807","808","809","810","811","812","813","814","815","816","817","818","819","820","821","822","823","824","825","826","827","828","829","830","831","832","833","834","835","836","837","838","839","840","841","842","843","844","845","846","847","848","849","850","851","852","853","854","855","856","857","858","859","860","861","862","863","864","865","866","867","868","869","870","871","872","873","874","875","876","877","878","879","880","881","882","883","884","885","886","887","888","889","890","891","892","893","894","895","896","897","898","899","900","901","902","903","904","905","906","907","908","909","910","911","912","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","930","931","932","933","934","935","936","937","938","939","940","941","942","943","944","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","970","971","972","973","974","975","976","977","978","979","980","981","982","983","984","985","986","987","988","989","990","991","992","993","994","995","996","997","998","999","1000","1001","1002","1003","1004","1005","1006","1007","1008","1009","1010","1011","1012","1013","1014","1015","1016","1017","1018","1019","1020","1021","1022","1023","1024","1025","1026","1027","1028","1029","1030","1031","1032","1033","1034","1035","1036","1037","1038","1039","1040","1041","1042","1043","1044","1045","1046","1047","1048","1049","1050","1051","1052","1053","1054","1055","1056","1057","1058","1059","1060","1061","1062","1063","1064","1065","1066","1067","1068","1069","1070","1071","1072","1073","1074","1075","1076","1077","1078","1079","1080","1081","1082","1083","1084","1085","1086","1087","1088","1089","1090","1091","1092","1093","1094","1095","1096","1097","1098","1099","1100","1101","1102","1103","1104","1105","1106","1107","1108","1109","1110","1111","1112","1113","1114","1115","1116","1117","1118","1119","1120","1121","1122","1123","1124","1125","1126","1127","1128","1129","1130","1131","1132","1133","1134","1135","1136","1137","1138","1139","1140","1141","1142","1143","1144","1145","1146","1147","1148","1149","1150","1151","1152","1153","1154","1155","1156","1157","1158","1159","1160","1161","1162","1163","1164","1165","1166","1167","1168","1169","1170","1171","1172","1173","1174","1175","1176","1177","1178","1179","1180","1181","1182","1183","1184","1185","1186","1187","1188","1189","1190","1191","1192","1193","1194","1195","1196","1197","1198","1199","1200","1201","1202","1203","1204","1205","1206","1207","1208","1209","1210","1211","1212","1213","1214","1215","1216","1217","1218","1219","1220","1221","1222","1223","1224","1225","1226","1227","1228","1229","1230","1231","1232","1233","1234","1235","1236","1237","1238","1239","1240","1241","1242","1243","1244","1245","1246","1247","1248","1249","1250","1251","1252","1253","1254","1255","1256","1257","1258","1259","1260","1261","1262","1263","1264","1265","1266","1267","1268","1269","1270","1271","1272","1273","1274","1275","1276","1277","1278","1279","1280","1281","1282","1283","1284","1285","1286","1287","1288","1289","1290","1291","1292","1293","1294","1295","1296","1297","1298","1299","1300","1301","1302","1303","1304","1305","1306","1307","1308","1309","1310","1311","1312","1313","1314","1315","1316","1317","1318","1319","1320","1321","1322","1323","1324","1325","1326","1327","1328","1329","1330","1331","1332","1333","1334","1335","1336","1337","1338","1339","1340","1341","1342","1343","1344","1345","1346","1347","1348","1349","1350","1351","1352","1353","1354","1355","1356","1357","1358","1359","1360","1361","1362","1363","1364","1365","1366","1367","1368","1369","1370","1371","1372","1373","1374","1375","1376","1377","1378","1379","1380","1381","1382","1383","1384","1385","1386","1387","1388","1389","1390","1391","1392","1393","1394","1395","1396","1397","1398","1399","1400","1401","1402","1403","1404","1405","1406","1407","1408","1409","1410","1411","1412","1413","1414","1415","1416","1417","1418","1419","1420","1421","1422","1423","1424","1425","1426","1427","1428","1429","1430","1431","1432","1433","1434","1435","1436","1437","1438","1439","1440","1441","1442","1443","1444","1445","1446","1447","1448","1449","1450","1451","1452","1453","1454","1455","1456","1457","1458","1459","1460","1461","1462","1463","1464","1465","1466","1467","1468","1469","1470","1471","1472","1473","1474","1475","1476","1477","1478","1479","1480","1481","1482","1483","1484","1485","1486","1487","1488","1489","1490","1491","1492","1493","1494","1495","1496","1497","1498","1499","1500","1501","1502","1503","1504","1505","1506","1507","1508","1509","1510","1511","1512","1513","1514","1515","1516","1517","1518","1519","1520","1521","1522","1523","1524","1525","1526","1527","1528","1529","1530","1531","1532","1533","1534","1535","1536","1537","1538","1539","1540","1541","1542","1543","1544","1545","1546","1547","1548","1549","1550","1551","1552","1553","1554","1555","1556","1557","1558","1559","1560","1561","1562","1563","1564","1565","1566","1567","1568","1569","1570","1571","1572","1573","1574","1575","1576","1577","1578","1579","1580","1581","1582","1583","1584","1585","1586","1587","1588","1589","1590","1591","1592","1593","1594","1595","1596","1597","1598","1599","1600","1601","1602","1603","1604","1605","1606","1607","1608","1609","1610","1611","1612","1613","1614","1615","1616","1617","1618","1619","1620","1621","1622","1623","1624","1625","1626","1627","1628","1629","1630","1631","1632","1633","1634","1635","1636","1637","1638","1639","1640","1641","1642","1643","1644","1645","1646","1647","1648","1649","1650","1651","1652","1653","1654","1655","1656","1657","1658","1659","1660","1661","1662","1663","1664","1665","1666","1667","1668","1669","1670","1671","1672","1673","1674","1675","1676","1677","1678","1679","1680","1681","1682","1683","1684","1685","1686","1687","1688","1689","1690","1691","1692","1693","1694","1695","1696","1697","1698","1699","1700","1701","1702","1703","1704","1705","1706","1707","1708","1709","1710","1711","1712","1713","1714","1715","1716","1717","1718","1719","1720","1721","1722","1723","1724","1725","1726","1727","1728","1729","1730","1731","1732","1733","1734","1735","1736","1737","1738","1739","1740","1741","1742","1743","1744","1745","1746","1747","1748","1749","1750","1751","1752"],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560,561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600,601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680,681,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760,761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800,801,802,803,804,805,806,807,808,809,810,811,812,813,814,815,816,817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840,841,842,843,844,845,846,847,848,849,850,851,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880,881,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,897,898,899,900,901,902,903,904,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,930,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,975,976,977,978,979,980,981,982,983,984,985,986,987,988,989,990,991,992,993,994,995,996,997,998,999,1000,1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012,1013,1014,1015,1016,1017,1018,1019,1020,1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1120,1121,1122,1123,1124,1125,1126,1127,1128,1129,1130,1131,1132,1133,1134,1135,1136,1137,1138,1139,1140,1141,1142,1143,1144,1145,1146,1147,1148,1149,1150,1151,1152,1153,1154,1155,1156,1157,1158,1159,1160,1161,1162,1163,1164,1165,1166,1167,1168,1169,1170,1171,1172,1173,1174,1175,1176,1177,1178,1179,1180,1181,1182,1183,1184,1185,1186,1187,1188,1189,1190,1191,1192,1193,1194,1195,1196,1197,1198,1199,1200,1201,1202,1203,1204,1205,1206,1207,1208,1209,1210,1211,1212,1213,1214,1215,1216,1217,1218,1219,1220,1221,1222,1223,1224,1225,1226,1227,1228,1229,1230,1231,1232,1233,1234,1235,1236,1237,1238,1239,1240,1241,1242,1243,1244,1245,1246,1247,1248,1249,1250,1251,1252,1253,1254,1255,1256,1257,1258,1259,1260,1261,1262,1263,1264,1265,1266,1267,1268,1269,1270,1271,1272,1273,1274,1275,1276,1277,1278,1279,1280,1281,1282,1283,1284,1285,1286,1287,1288,1289,1290,1291,1292,1293,1294,1295,1296,1297,1298,1299,1300,1301,1302,1303,1304,1305,1306,1307,1308,1309,1310,1311,1312,1313,1314,1315,1316,1317,1318,1319,1320,1321,1322,1323,1324,1325,1326,1327,1328,1329,1330,1331,1332,1333,1334,1335,1336,1337,1338,1339,1340,1341,1342,1343,1344,1345,1346,1347,1348,1349,1350,1351,1352,1353,1354,1355,1356,1357,1358,1359,1360,1361,1362,1363,1364,1365,1366,1367,1368,1369,1370,1371,1372,1373,1374,1375,1376,1377,1378,1379,1380,1381,1382,1383,1384,1385,1386,1387,1388,1389,1390,1391,1392,1393,1394,1395,1396,1397,1398,1399,1400,1401,1402,1403,1404,1405,1406,1407,1408,1409,1410,1411,1412,1413,1414,1415,1416,1417,1418,1419,1420,1421,1422,1423,1424,1425,1426,1427,1428,1429,1430,1431,1432,1433,1434,1435,1436,1437,1438,1439,1440,1441,1442,1443,1444,1445,1446,1447,1448,1449,1450,1451,1452,1453,1454,1455,1456,1457,1458,1459,1460,1461,1462,1463,1464,1465,1466,1467,1468,1469,1470,1471,1472,1473,1474,1475,1476,1477,1478,1479,1480,1481,1482,1483,1484,1485,1486,1487,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,1515,1516,1517,1518,1519,1520,1521,1522,1523,1524,1525,1526,1527,1528,1529,1530,1531,1532,1533,1534,1535,1536,1537,1538,1539,1540,1541,1542,1543,1544,1545,1546,1547,1548,1549,1550,1551,1552,1553,1554,1555,1556,1557,1558,1559,1560,1561,1562,1563,1564,1565,1566,1567,1568,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,1591,1592,1593,1594,1595,1596,1597,1598,1599,1600,1601,1602,1603,1604,1605,1606,1607,1608,1609,1610,1611,1612,1613,1614,1615,1616,1617,1618,1619,1620,1621,1622,1623,1624,1625,1626,1627,1628,1629,1630,1631,1632,1633,1634,1635,1636,1637,1638,1639,1640,1641,1642,1643,1644,1645,1646,1647,1648,1649,1650,1651,1652,1653,1654,1655,1656,1657,1658,1659,1660,1661,1662,1663,1664,1665,1666,1667,1668,1669,1670,1671,1672,1673,1674,1675,1676,1677,1678,1679,1680,1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1695,1696,1697,1698,1699,1700,1701,1702,1703,1704,1705,1706,1707,1708,1709,1710,1711,1712,1713,1714,1715,1716,1717,1718,1719,1720,1721,1722,1723,1724,1725,1726,1727,1728,1729,1730,1731,1732,1733,1734,1735,1736,1737,1738,1739,1740,1741,1742,1743,1744,1745,1746,1747,1748,1749,1750,1751,1752],[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,true,true,false,false,true,false,false,false,false,false,true,false,true,false,true,false,false,false,false,true,false,false,false,false,false,false,true,true,false,false,false,false,false,true,false,false,false,true,false,false,false,true,false,false,false,false,false,false,false,false,true,false,false,false,true,false,true,false,false,false,true,false,false,true,false,false,false,false,false,false,false,true,true,false,false,true,false,false,false,false,false,false,false,false,false,false,true,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,true,true,true,false,false,true,true,false,true,false,false,false,false,false,false,false,false,false,true,true,false,false,true,true,false,false,false,false,false,false,true,false,false,false,true,false,true,true,false,false,false,false,false,false,true,false,false,false,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,true,false,true,false,false,true,false,false,true,false,false,false,true,false,false,false,false,false,true,false,false,true,false,true,true,false,false,false,false,true,false,true,false,true,false,false,true,false,false,false,true,false,true,false,false,false,false,false,false,false,true,true,false,true,false,false,false,false,false,false,true,false,true,false,true,false,true,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,true,false,false,false,false,false,true,false,false,true,false,true,false,false,true,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,true,false,false,false,false,true,false,false,false,false,false,false,false,true,false,false,true,false,false,true,false,true,false,false,false,false,true,false,false,false,false,false,true,true,true,false,false,false,false,true,false,false,false,false,false,true,false,true,true,false,true,true,false,true,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,false,false,false,false,false,false,true,true,false,true,false,true,false,true,false,false,false,false,false,false,true,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,true,false,true,false,false,false,false,true,true,true,false,false,false,true,false,true,false,false,true,false,false,false,false,false,false,true,false,false,false,true,false,false,false,false,false,false,false,false,true,false,false,false,true,false,true,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,true,false,false,false,true,false,true,true,false,false,false,false,false,false,false,true,false,false,true,false,true,true,false,false,false,false,false,false,false,true,false,false,false,true,false,true,true,false,false,false,false,true,false,false,false,false,false,false,true,false,false,true,false,false,false,true,true,false,true,true,false,false,true,false,false,false,true,false,false,false,false,false,false,false,false,true,false,false,true,false,false,false,false,false,false,false,false,true,true,false,true,false,false,false,false,false,false,false,false,false,false,false,true,true,true,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,true,false,true,false,true,false,false,false,false,false,true,false,false,true,false,false,false,true,false,false,false,false,false,false,true,true,false,true,true,false,false,true,false,true,false,false,true,false,false,false,false,true,false,true,false,false,false,false,true,false,false,true,false,true,false,false,false,true,false,false,true,false,true,true,true,false,true,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,true,false,false,false,false,true,false,false,false,false,false,false,false,true,false,false,false,false,false,false,true,false,true,false,false,true,false,true,false,true,true,false,true,false,true,false,false,false,false,true,false,false,true,false,false,false,false,false,false,true,true,false,false,false,true,false,true,false,true,true,false,true,false,true,false,false,false,true,false,false,false,false,true,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,true,false,false,false,true,false,true,false,true,false,false,true,false,false,true,false,false,false,false,true,false,false,false,true,false,false,true,true,false,false,false,true,true,false,false,false,false,true,true,true,false,true,false,false,false,false,false,true,false,false,false,false,false,false,false,true,false,false,false,true,false,true,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,false,true,false,false,false,true,true,false,false,false,false,true,false,false,false,true,false,false,false,false,false,true,false,false,true,true,true,true,false,true,false,false,true,true,true,true,false,false,false,false,false,true,false,false,false,false,false,false,false,false,true,true,false,false,true,false,false,false,false,false,true,false,false,true,true,false,true,false,false,false,false,true,false,true,false,false,true,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,true,true,false,false,true,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,true,false,false,false,false,true,false,false,false,false,false,false,false,true,false,true,false,false,false,false,false,false,false,false,true,false,true,false,false,false,false,false,false,false,false,true,false,false,true,false,true,true,false,false,true,false,false,false,false,true,true,false,false,false,false,false,false,false,true,false,true,false,false,false,false,true,true,false,false,false,true,false,false,false,false,true,false,false,true,false,false,false,false,false,true,false,false,false,false,false,false,true,false,false,false,false,false,false,true,false,false,true,false,false,false,false,false,true,false,false,false,false,true,false,false,false,false,false,true,false,false,false,false,true,false,false,false,false,false,false,true,false,false,false,false,true,false,false,false,false,false,false,true,false,true,false,false,true,true,false,false,true,false,true,true,false,false,false,false,false,false,false,true,true,false,false,false,true,false,false,false,true,false,false,false,true,false,false,true,false,false,false,false,false,false,true,false,false,false,false,false,true,false,true,true,false,false,false,false,true,true,false,true,true,false,false,false,false,false,true,false,true,false,false,false,false,true,true,false,false,false,false,false,true,true,false,false,false,false,false,true,false,false,false,true,true,false,false,false,false,true,false,false,false,false,true,true,false,true,false,true,true,true,false,false,false,false,true,false,true,false,false,false,false,false,true,true,true,false,false,false,false,false,true,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,true,false,false,true,true,false,true,true,true,false,false,false,false,false,false,true,true,false,true,false,false,false,false,true,false,true,false,false,true,true,false,false,true,true,false,false,false,false,false,false,false,false,false,true,false,false,true,true,true,true,true,true,true,true,true,true,true,false,false,true,false,false,false,false,false,true,true,true,false,false,false,true,false,false,false,true,false,false,false,false,true,false,false,false,false,false,true,false,false,false,false,false,true,false,true,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,true,false,false,true,true,false,false,false,false,false,false,false,false,true,false,false,true,false,true,false,false,true,false,true,false,false,false,false,false,false,false,true,false,false,true,false,false,true,false,false,false,false,false,false,true,false,false,true,false,false,false,false,false,false,false,false,true,false,true,false,false,false,true,false,false,false,false,false,false,false,true,false,false,false,false,false,true,false,true,true,false,false,false,true,true,true,false,false,false,true,false,false,true,false,false,false,true,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,true,true,true,true,false,false,false,false,false,false,false,false,false,true,false,true,true,true,false,false,false,false,false,true,true,false,false,false,true,false,false,false,false,false,false,true,false,false,false,true,false,false,true,false,false,false,false,true,false,false,false,false,true,false,true,false,false,false,false,false,true,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,false,false,false,true,false,false,false,true,false,false,false,false,false,false,false,false,true,true,false,false,true,false,false,false,false,true,false,true,false,true,true,false,true,false,false,true,false,false,true,false,true,false,false,true,false,true,false,false,true,false,false,false,true,true,false,false,true,false,false,true,false,false,false,false,false,true,false,false,false,false,true,false,false,false,false,true,false,false,true,false,false,false,false,true,false,false,true,true,false,false,false,false,false,false,false,false,true,false,true,false,true,false,true,false,false,false,false,true,false,true,true,true,true,false,false,false,false,false,true,false,true,false,true,false,false,true,false,false,false,false,true,false,false,false],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,0,1,0,0,0,0,0,1,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,1,1,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,0,0,0,0,0,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,1,0,1,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,1,0,0,0,1,0,1,1,0,0,0,0,0,0,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,1,0,1,1,0,0,0,0,1,0,1,0,1,0,0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,1,1,0,1,0,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,1,0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,1,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1,1,1,0,0,0,0,1,0,0,0,0,0,1,0,1,1,0,1,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,1,0,1,0,1,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,1,1,1,0,0,0,1,0,1,0,0,1,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,1,1,0,0,0,0,0,0,0,1,0,0,1,0,1,1,0,0,0,0,0,0,0,1,0,0,0,1,0,1,1,0,0,0,0,1,0,0,0,0,0,0,1,0,0,1,0,0,0,1,1,0,1,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,1,1,0,1,1,0,0,1,0,1,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,1,0,1,0,0,0,1,0,0,1,0,1,1,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,1,0,0,1,0,1,0,1,1,0,1,0,1,0,0,0,0,1,0,0,1,0,0,0,0,0,0,1,1,0,0,0,1,0,1,0,1,1,0,1,0,1,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,1,0,0,1,0,0,1,0,0,0,0,1,0,0,0,1,0,0,1,1,0,0,0,1,1,0,0,0,0,1,1,1,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,0,0,0,1,1,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,1,1,1,1,0,1,0,0,1,1,1,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,0,0,0,1,0,0,1,1,0,1,0,0,0,0,1,0,1,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,1,0,0,1,0,1,1,0,0,1,0,0,0,0,1,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,1,1,0,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,0,1,0,0,1,1,0,0,1,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,1,0,1,1,0,0,0,0,1,1,0,1,1,0,0,0,0,0,1,0,1,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,0,0,0,1,1,0,0,0,0,1,0,0,0,0,1,1,0,1,0,1,1,1,0,0,0,0,1,0,1,0,0,0,0,0,1,1,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,1,1,0,1,1,1,0,0,0,0,0,0,1,1,0,1,0,0,0,0,1,0,1,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,0,0,0,0,1,1,1,0,0,0,1,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,0,0,1,0,0,1,0,1,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,1,1,0,0,0,1,1,1,0,0,0,1,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,1,0,1,1,1,0,0,0,0,0,1,1,0,0,0,1,0,0,0,0,0,0,1,0,0,0,1,0,0,1,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,0,0,1,0,1,0,1,1,0,1,0,0,1,0,0,1,0,1,0,0,1,0,1,0,0,1,0,0,0,1,1,0,0,1,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,1,0,1,1,1,1,0,0,0,0,0,1,0,1,0,1,0,0,1,0,0,0,0,1,0,0,0],[38,48,32,55,36,30,29,45,51,42,60,50,61,71,57,15,49,28,18,29,50,17,59,43,50,33,59,22,30,34,57,29,37,32,59,42,26,57,31,57,80,57,50,23,18,25,25,51,39,39,28,25,80,31,18,30,81,17,35,34,35,26,74,22,33,52,33,17,42,33,29,51,37,28,34,51,65,24,73,41,17,30,60,47,38,56,31,56,24,33,43,57,25,62,23,34,66,30,57,55,64,45,52,32,74,79,21,23,22,45,54,44,33,29,49,63,33,32,32,44,41,36,38,30,25,32,52,69,16,34,54,40,25,26,57,56,29,53,36,48,62,63,29,20,69,41,48,46,59,47,28,41,25,43,30,53,25,33,47,90,38,50,60,53,23,54,32,33,17,17,40,30,52,54,75,61,71,47,62,34,25,42,53,62,72,69,50,34,33,33,32,34,17,28,35,30,22,32,22,27,46,61,26,25,50,56,41,82,20,50,33,27,46,31,24,27,28,31,28,24,48,28,46,11,29,62,55,29,51,34,32,40,13,55,34,43,47,47,27,31,29,32,45,16,56,63,27,46,34,52,39,38,17,39,23,28,36,23,33,43,32,42,64,26,41,65,54,69,51,32,30,65,37,18,63,45,58,27,53,38,33,37,21,38,46,49,53,26,23,41,40,31,37,28,35,63,37,33,31,33,27,40,36,33,39,27,42,53,63,33,63,37,47,30,21,39,33,29,29,42,30,41,23,51,53,68,37,42,22,34,43,63,59,20,40,63,22,26,17,63,72,84,65,27,45,28,34,38,42,24,21,24,31,33,33,77,29,26,33,26,44,23,33,43,26,25,62,36,21,73,38,27,45,31,62,40,34,56,81,43,35,81,35,57,32,47,45,53,37,44,22,30,24,32,18,39,60,40,59,23,15,27,66,44,30,44,43,29,44,44,25,51,32,40,26,41,33,67,53,44,58,34,56,41,44,27,28,27,36,52,48,32,28,22,29,46,48,43,36,25,20,48,35,40,57,58,46,29,56,35,43,79,61,85,29,53,39,26,29,41,25,65,25,80,47,64,29,63,53,29,25,51,41,21,53,18,42,36,70,24,42,31,26,19,60,34,61,16,33,25,29,25,49,23,58,53,46,22,51,40,38,75,29,71,61,74,27,30,43,21,41,36,19,32,53,40,33,28,53,66,27,65,31,61,27,23,18,31,30,41,51,36,25,44,30,56,55,31,27,33,31,31,14,39,31,71,26,31,32,28,24,35,29,27,53,53,67,26,29,30,33,34,58,39,27,42,19,24,29,40,66,32,47,28,35,24,31,54,18,37,69,21,32,42,36,48,42,69,30,66,84,59,27,14,20,34,25,51,30,28,46,74,27,42,34,46,34,28,43,37,37,59,46,27,37,32,27,64,42,67,40,25,69,43,33,35,24,32,21,54,21,44,35,75,27,28,30,58,54,18,49,54,56,18,46,54,66,33,30,62,15,18,23,26,22,55,22,22,86,26,34,54,31,62,27,34,60,21,21,28,59,55,19,61,31,49,21,20,32,67,26,55,21,19,29,34,28,33,24,24,33,40,32,64,24,46,14,38,48,69,30,65,51,34,50,25,29,41,43,34,36,34,53,30,66,48,24,40,35,59,40,17,29,46,27,40,30,46,44,26,42,28,48,45,44,30,21,23,49,55,41,31,58,25,61,16,24,54,23,31,31,30,24,47,30,13,17,67,33,51,30,32,37,57,30,33,28,30,63,52,17,43,28,38,14,22,39,30,34,39,54,60,41,27,45,53,34,51,32,47,53,48,34,24,72,67,27,74,43,61,29,50,33,28,40,30,59,24,47,40,65,55,66,38,14,80,59,63,33,25,34,33,21,49,34,30,46,41,36,46,59,58,35,26,58,33,34,17,32,27,29,17,50,68,35,40,32,28,56,31,28,19,19,66,53,33,60,68,77,31,40,43,33,67,29,28,34,62,57,28,39,45,34,30,35,26,33,70,70,33,61,81,39,46,51,60,45,47,21,26,61,22,51,31,79,39,40,43,26,35,34,38,26,59,29,39,45,23,33,62,38,34,66,31,36,40,48,26,16,17,58,27,41,45,24,20,25,47,32,34,30,32,26,41,30,31,69,60,41,48,34,32,23,17,46,22,18,41,47,40,68,78,17,72,44,23,33,26,19,51,56,42,28,25,34,19,38,68,28,55,39,27,86,46,34,18,50,36,34,27,38,58,61,39,65,17,27,56,35,25,29,67,41,66,54,28,43,55,29,68,38,33,69,19,59,52,34,13,47,56,45,73,42,25,28,63,50,39,26,10,47,31,34,23,31,27,54,32,26,20,55,29,70,26,34,37,34,25,33,42,25,53,30,39,37,48,34,36,57,23,79,60,18,31,32,29,50,26,18,48,47,41,34,17,20,46,29,34,67,25,32,51,31,30,26,55,74,50,46,30,13,51,61,47,25,45,43,29,61,23,59,29,36,56,59,46,23,42,63,26,35,30,32,33,51,33,30,41,35,29,62,49,39,31,30,21,56,42,52,62,31,18,50,58,27,37,26,33,27,27,36,32,27,48,59,38,71,38,48,48,59,30,41,17,27,32,35,74,35,33,42,43,37,44,43,21,23,30,18,32,30,15,35,41,62,15,48,15,14,57,39,31,39,54,25,46,25,22,74,52,26,24,69,37,69,19,43,51,31,14,41,33,32,56,29,26,66,48,39,23,30,50,40,26,27,24,29,43,32,36,50,59,45,31,38,34,57,36,33,33,60,31,39,25,47,15,47,39,67,70,21,24,39,48,59,51,45,16,20,71,42,30,71,59,28,47,31,41,19,22,30,39,31,26,24,26,30,36,40,26,36,42,18,43,30,13,26,49,39,34,54,18,55,33,50,56,40,30,35,20,26,25,27,65,37,53,26,19,53,34,50,39,34,34,61,13,37,33,33,27,40,20,46,43,33,23,53,25,41,38,27,25,41,50,67,51,72,46,72,20,53,57,24,42,34,50,47,26,31,71,45,30,45,18,67,54,25,23,47,35,26,23,26,54,57,53,37,31,49,37,23,53,27,28,20,30,45,23,18,15,31,64,29,29,75,51,34,30,63,23,28,29,39,37,41,52,41,34,37,30,33,33,43,41,28,28,45,32,56,61,24,68,47,78,30,56,22,30,33,39,51,14,43,38,45,27,54,43,33,43,35,40,41,32,43,32,61,45,62,75,58,34,52,52,45,25,26,30,31,38,24,34,49,27,39,34,76,82,33,42,14,29,31,23,55,39,32,32,27,60,34,25,29,51,16,53,52,57,28,38,70,62,47,49,47,59,50,59,31,41,48,41,36,21,47,39,34,32,36,24,30,30,53,60,33,34,56,21,44,26,21,42,25,32,34,38,28,29,38,71,28,18,12,75,43,21,22,42,43,30,33,64,34,21,64,34,27,43,89,24,58,62,63,73,25,52,26,47,19,22,50,72,57,40,44,18,48,66,17,16,16,19,73,37,42,48,39,37,32,60,41,13,38,16,32,29,51,25,37,69,34,39,25,30,33,36,25,31,31,42,55,72,34,22,45,30,31,35,66,57,26,34,75,56,45,35,31,46,47,55,29,38,20,69,57,25,32,45,61,18,42,23,36,29,29,35,27,50,23,63,32,30,28,58,24,24,68,25,46,45,58,20,41,49,44,30,34,54,54,69,69,59,63,54,39,26,36,41,34,20,80,47,27,32,41,31,61,15,32,31,28,39,73,21,35,33,18,40,21,24,34,23,20,21,45,33,17,37,28,58,17,26,55,51,32,29,34,68,70,47,64,64,39,23,40,40,65,35,20,58,56,75,70,19,37,31,30,43,29,56,29,24,46,34,35,28,43,54,64,32,47,57,33,23,28,40,25,70,28,54,31,21,28,42,76,16,34,43,20,24,27,42,27,50,32,33,20,43,58,29,13,48,31,25,77,22,33,58,16,20,35,65],[779,700,1083,753,919,969,1012,708,733,862,681,683,642,522,706,1251,709,892,1273,1166,818,1292,751,844,877,1006,666,1235,982,798,722,933,843,1082,662,883,892,789,958,565,504,846,885,1240,970,1227,1155,713,844,1008,908,1235,527,1109,1290,1032,336,1343,676,1001,1052,1270,673,1189,975,854,1000,1037,821,908,1025,693,959,960,1122,695,663,1096,539,856,1060,1066,787,884,1005,726,1070,670,948,866,794,834,987,802,1198,921,574,1131,785,796,697,855,985,911,424,427,1274,891,1188,599,729,761,1210,1074,893,754,1066,883,893,1006,674,608,463,1133,932,889,633,505,1043,999,730,957,1333,1183,751,641,1187,795,818,684,568,711,1028,1105,602,882,894,1010,874,758,948,937,1209,840,989,761,1000,662,923,340,754,944,751,693,942,713,799,994,976,1124,939,1077,829,720,564,888,664,929,630,923,1098,928,738,827,549,609,900,758,883,920,766,1000,1091,1008,765,737,1237,998,813,1032,740,716,1070,1165,832,698,909,369,1078,773,939,1108,859,846,1070,1254,1074,1130,955,882,894,879,851,1435,1113,637,585,817,798,852,921,770,1273,688,841,808,861,768,1090,1181,790,845,1043,1340,812,604,1010,725,837,789,719,919,1176,837,1062,1088,715,1232,1075,742,1044,945,598,1081,885,674,779,550,798,952,917,761,804,1021,538,829,739,1067,706,1065,845,722,1299,939,958,854,865,1033,967,861,814,652,869,838,867,600,724,888,929,1041,761,940,970,938,829,1077,966,611,738,907,709,967,972,669,1217,853,923,771,1049,847,896,995,1056,812,702,544,1001,958,1177,883,703,704,783,1145,814,861,925,1092,1112,656,631,410,758,907,824,1088,1115,915,766,938,1208,1129,977,1012,1099,392,755,1119,969,965,936,1238,869,923,966,937,622,874,1106,707,661,1219,796,1115,666,762,965,813,464,823,962,330,890,732,1087,907,962,904,945,917,1073,967,1248,983,1429,988,741,812,788,1315,1199,992,709,684,1134,892,927,1007,908,944,1183,866,1041,1026,1058,982,889,730,793,814,502,862,841,783,848,923,1003,1139,1072,702,627,890,1065,876,1223,753,807,788,793,989,1060,863,1016,865,524,874,727,943,866,765,728,507,763,412,913,692,762,1214,981,878,964,716,1079,503,962,792,1010,677,821,979,1215,876,919,1046,687,908,955,936,707,1302,870,919,1036,1079,751,1006,670,1182,1035,980,931,929,786,993,811,696,1018,1182,526,954,1007,614,999,645,755,739,875,1190,890,1156,1041,1024,1085,1064,792,995,889,1112,880,667,880,678,972,658,903,1231,1233,711,1112,788,890,745,1006,880,972,883,819,851,1234,835,955,1048,1238,893,1059,404,1045,888,1037,860,984,1141,1066,695,772,691,652,1086,873,1036,827,1069,759,1015,1271,799,970,1178,968,744,643,1027,726,1070,970,1294,929,704,1119,547,517,941,1109,968,837,662,909,606,1210,622,490,719,1055,1241,1128,868,1076,668,1035,931,785,508,1352,1044,1089,764,928,887,918,781,926,607,935,911,821,1183,1189,723,959,636,850,1093,538,783,1012,878,1012,961,1005,684,1161,922,929,564,1089,1001,767,607,740,1256,684,823,804,1272,984,855,692,917,1024,822,1053,1154,1138,797,1105,884,1254,791,447,1155,920,923,854,722,1171,838,887,978,1342,988,649,776,1464,714,819,800,1310,928,881,501,1247,746,1093,1054,1144,962,838,1014,1101,1013,913,936,778,600,1084,699,1380,994,811,701,1304,631,859,985,737,1185,1189,907,783,1044,960,919,636,923,580,892,1001,976,975,646,874,906,999,828,1102,783,953,781,884,977,710,1168,857,812,871,1023,1047,1173,597,735,889,844,699,827,682,1284,949,688,878,1066,833,1080,1233,728,1169,1372,1401,683,833,891,1139,1014,999,673,934,595,856,1105,654,744,1122,807,786,885,1341,1065,968,799,1037,652,765,557,1007,930,889,748,899,794,929,776,817,903,997,1149,702,563,1124,595,794,634,1015,744,1056,1110,683,969,634,1134,825,915,589,823,734,1008,1228,500,628,637,666,1220,694,769,1166,900,1074,648,785,1001,664,780,780,815,1062,834,666,1015,905,1398,1044,1157,764,1168,712,440,990,524,883,1223,860,1003,1076,1090,1052,456,734,818,672,729,602,1015,834,620,1170,662,1141,1095,964,779,823,899,922,843,1092,951,990,1056,956,515,536,1065,544,476,955,767,944,773,930,895,1191,794,789,1312,819,677,539,972,758,614,955,1097,1042,885,1101,685,1047,932,840,1059,1043,622,924,1076,592,869,791,901,723,952,1322,1051,723,947,840,700,995,1031,1028,666,1046,997,982,1051,1136,818,1035,878,587,847,957,822,1004,1010,1005,1049,802,1098,1169,923,842,889,495,643,1076,685,918,965,568,1087,1112,896,748,810,1198,864,900,1215,978,637,894,701,923,997,445,634,938,1064,926,888,956,1034,667,769,803,827,804,1071,989,857,971,992,1025,871,832,516,826,1078,915,627,975,573,649,993,585,1301,782,769,1059,1222,840,731,873,609,863,1113,956,682,791,839,1052,1402,652,1045,760,1083,969,1142,882,764,1287,1121,883,1110,702,1034,969,931,936,1163,890,913,1119,594,951,772,1075,882,859,865,806,986,395,847,1031,1058,842,931,546,1093,1059,827,863,979,923,976,1284,714,1218,935,715,1053,1107,867,801,1096,860,751,547,657,861,913,1484,821,723,809,911,797,808,1119,644,1197,651,856,622,769,802,961,1141,909,633,947,970,1077,1123,1019,807,888,1031,957,839,1134,766,717,737,979,1009,995,734,763,807,745,1060,1122,812,513,1227,1016,1033,892,1022,1098,950,945,1027,688,766,1040,620,966,658,769,723,1024,800,1179,1081,851,1094,599,885,993,953,763,965,907,895,1258,1102,1029,1150,1019,1134,1244,851,878,709,1303,699,1087,1302,741,996,957,728,792,1237,897,1019,889,616,772,1107,1142,703,847,709,1117,819,865,1241,1296,847,1018,830,680,1026,1043,473,921,1039,1141,1043,781,820,998,1020,924,1002,587,934,829,744,746,864,825,822,959,659,718,935,1050,852,1091,894,976,1014,1015,695,1014,647,530,1171,1039,872,889,749,758,825,1005,1122,681,717,1129,552,755,779,980,989,902,861,1111,1182,996,964,1154,958,1174,1011,754,978,809,908,935,1160,843,917,1135,958,988,897,1010,870,1025,749,693,769,842,885,1109,850,1128,857,1031,1155,760,936,825,1014,978,680,992,694,678,1008,965,608,1410,1169,1157,1002,970,645,1332,797,802,946,1184,800,1008,806,875,1054,1087,721,826,590,870,526,893,592,988,617,724,1062,951,1136,667,843,831,909,613,910,1051,619,1086,599,918,1053,1110,834,1001,1173,1091,1015,640,791,715,851,809,857,862,1090,532,1152,790,1091,1015,736,991,1039,1220,750,701,1100,957,748,830,980,1116,680,877,791,741,1049,891,851,669,899,1000,978,959,1019,838,747,814,801,1083,723,869,789,681,1016,673,861,438,1049,709,1095,1065,767,841,754,1189,915,956,854,1155,770,800,852,1028,777,723,883,1049,953,861,668,588,579,589,544,658,817,722,854,1170,1266,1059,1056,933,895,1084,835,726,971,886,543,561,851,918,1041,1087,851,1070,761,882,887,1187,1084,758,879,929,1106,680,1103,809,745,790,1020,981,651,644,820,851,684,839,826,731,899,829,800,769,921,1075,815,789,1072,873,1039,770,906,1106,744,574,1082,806,895,1184,718,1109,1162,859,1050,1039,1083,761,905,1183,1029,714,967,988,1397,563,887,1230,1229,767,831,1087,1125,705,993,911,767,965,1065,894,351,1072,753,864,746,682,1122,857,1169,736,1274,1121,821,685,665,941,770,1198,644,648,1015,1112,1107,873,550,835,899,681,941,835,992,828,1052,1116,1090,1296,791,793,706,1115,919,588,979,736,917,1114,943,879,1025,868,1002,1017,797,599,817,891,932,986,930,923,658,859,1069,967,593,694,681,891,1025,849,711,876,1056,782,1165,534,668,1173,1059,993,661,1403,944,1028,940,1054,998,881,1049,787,1297,737,1066,1097,1057,624,1026,1051,532,1163,868,1014,556,1163,894,832,831,872,817,613,848,717,690,667,708,740,834,806,986,806,727,1365,501,861,1275,806,951,911,640,1252,897,1003,735,958,695,1178,922,1087,1033,870,1181,1348,1040,1180,1299,978,899,918,1161,990,1056,861,855,932,938,864,756,1144,1014,424,698,674,654,846,1061,978,760,925,652,793,958,721,825,471,685,1247,879,1000,823,880,1103,718,1130,985,780,877,638,915,821,693,659,939,851,686,937,1304,850,802,1063,641,1011,880,764,1145,855,908,565,1104,900,699,875,799,909,843,1205,768,1106,1024,1117,792,631,1254,1094,778,795,913,611,1282,859,677,1010,1304,924,784],[35,35,58,68,46,37,58,30,18,64,30,20,24,8,42,96,66,49,94,70,51,63,35,29,57,56,35,70,66,36,26,52,32,74,40,39,31,54,62,21,13,54,54,82,56,76,57,26,43,79,68,71,12,77,74,53,13,91,8,60,71,79,28,66,48,58,92,62,33,38,64,43,60,60,75,52,37,67,15,51,84,88,54,37,67,27,42,37,42,48,61,63,56,41,65,46,17,81,52,41,54,46,71,42,8,5,77,43,75,27,34,36,88,45,9,46,69,34,38,76,32,19,11,74,56,57,15,11,61,60,54,58,100,80,47,27,75,49,57,48,28,63,81,74,32,38,46,76,49,35,56,50,59,41,73,33,41,23,42,15,35,70,55,13,42,10,30,56,31,62,58,57,35,44,25,67,25,54,48,44,54,73,50,58,7,29,54,33,47,52,37,60,63,64,18,23,87,50,39,34,30,44,69,55,49,21,36,9,65,38,67,62,63,51,91,78,64,58,36,55,69,48,59,88,64,28,25,9,50,50,66,24,87,41,54,71,46,26,72,70,41,39,74,76,40,11,75,39,50,36,44,28,60,27,77,58,47,53,71,47,71,71,22,64,51,28,63,25,47,60,36,51,52,83,9,48,28,70,39,74,38,28,89,60,66,36,53,45,62,52,44,21,42,54,60,18,52,57,45,40,45,75,50,69,34,57,58,8,41,43,45,61,50,36,79,46,52,50,76,34,50,61,27,30,30,13,76,68,83,45,31,35,58,79,30,65,49,67,71,23,44,11,47,42,72,77,71,39,38,59,89,76,45,54,76,23,41,66,54,62,48,77,39,37,72,48,9,49,93,17,13,91,56,68,30,32,68,52,18,20,49,8,53,48,60,58,48,48,68,43,67,56,93,50,84,65,57,51,47,89,82,78,44,33,59,70,54,34,49,52,52,50,65,67,51,71,46,40,52,43,21,60,71,43,51,35,46,62,75,39,29,52,52,49,96,35,28,37,52,91,40,52,54,60,31,59,37,46,61,28,21,26,62,28,38,9,31,75,46,47,44,40,53,29,62,48,55,50,53,71,66,70,60,69,11,24,48,52,56,78,44,30,60,54,37,54,28,67,60,41,28,32,35,45,42,32,64,90,14,61,76,26,57,42,30,60,40,80,43,93,79,62,77,75,36,56,36,73,73,28,42,39,48,24,53,78,91,38,62,42,47,60,71,46,41,72,43,27,54,47,66,79,73,41,88,12,90,63,58,54,54,54,67,10,56,35,50,62,54,54,43,58,37,51,91,47,45,88,50,40,23,59,25,64,58,96,37,34,53,18,9,38,69,67,79,15,23,19,83,34,23,61,62,70,64,58,56,39,51,31,30,27,82,74,77,41,53,12,50,60,46,15,49,33,24,84,74,52,70,24,33,70,20,54,56,47,61,57,58,7,77,49,58,16,65,56,44,21,16,54,6,59,44,86,61,82,40,46,50,52,43,61,47,55,61,59,81,44,34,73,42,36,50,31,85,49,52,51,85,74,17,51,89,47,47,26,86,59,53,10,85,28,46,49,74,55,25,74,69,59,66,60,39,14,62,29,95,70,51,22,100,23,63,66,50,72,77,37,22,52,46,58,40,38,28,33,54,67,44,9,42,27,47,59,63,44,64,42,50,40,27,78,25,48,61,58,71,71,30,26,55,67,64,47,48,74,53,32,44,61,55,58,64,30,84,71,72,27,56,51,75,50,80,29,42,29,54,82,41,47,56,55,47,38,84,73,61,33,60,15,55,7,79,41,75,45,35,65,67,44,50,49,48,71,34,32,60,27,53,45,61,28,56,79,51,49,28,66,52,57,28,27,38,71,75,19,35,32,33,53,32,25,72,57,67,37,35,50,31,61,30,42,64,35,32,48,50,80,40,70,42,77,23,33,61,13,64,82,58,65,69,62,50,7,21,46,29,58,31,65,51,23,90,38,59,78,45,46,62,41,53,35,69,67,57,64,41,17,15,72,35,9,54,24,57,49,34,56,80,39,36,73,32,46,49,56,31,17,46,92,72,50,58,53,57,38,33,64,79,38,75,50,31,38,24,57,64,42,99,54,29,59,36,23,66,60,71,38,65,41,40,58,76,72,66,26,37,55,59,44,69,70,53,43,38,58,55,32,33,67,31,47,74,36,46,53,26,65,65,50,51,42,76,46,64,65,48,40,46,33,59,66,28,29,56,25,66,38,62,45,35,54,41,45,43,59,57,46,59,84,79,60,35,21,41,67,44,23,42,11,15,73,22,67,38,42,59,100,43,45,46,30,40,61,53,46,49,43,50,70,14,42,40,44,42,82,58,37,80,75,56,66,20,72,62,38,60,66,43,52,68,34,46,51,56,60,19,52,40,61,9,50,53,53,51,74,22,55,64,34,53,71,43,28,89,10,63,41,42,56,72,50,71,77,38,35,11,46,41,74,81,48,44,21,45,64,27,85,12,85,22,47,29,52,39,63,71,74,35,65,43,59,60,68,30,61,57,39,29,65,41,11,43,52,66,60,40,32,36,24,54,64,36,22,86,76,48,54,30,83,44,61,72,22,63,59,27,64,18,32,49,53,36,73,94,36,60,28,48,60,46,41,73,55,50,84,59,50,64,49,75,97,52,45,41,79,25,86,82,44,67,44,39,40,54,55,37,50,36,45,79,73,57,41,19,63,47,58,73,90,58,60,42,28,49,61,13,67,61,68,71,39,52,56,71,66,43,9,40,33,35,23,56,49,29,76,44,43,62,63,66,80,37,26,58,37,21,70,26,29,78,87,39,38,45,37,39,60,67,40,29,68,36,58,62,58,74,59,42,70,98,77,48,90,59,78,53,32,83,41,78,52,54,42,68,65,65,70,31,62,57,56,35,43,25,51,40,83,35,46,60,75,60,46,47,26,48,63,32,84,33,37,49,44,12,100,85,71,50,49,22,79,22,55,62,57,31,62,33,51,54,65,19,25,21,57,17,29,31,51,23,30,64,49,92,38,41,43,45,43,64,45,18,64,24,66,56,77,41,56,75,61,57,28,30,14,35,34,52,35,51,26,97,47,64,73,40,66,56,79,8,32,52,53,44,53,46,75,15,27,33,36,67,63,25,15,60,69,70,53,51,43,31,36,32,67,42,56,46,52,54,33,61,11,68,21,80,58,30,54,23,67,53,59,28,79,30,43,24,78,41,26,55,47,48,51,48,37,26,46,10,33,40,26,57,79,84,50,62,34,41,69,41,39,84,39,29,41,45,51,45,62,22,44,38,40,51,83,81,38,26,70,73,39,48,49,41,44,55,70,34,33,42,53,32,51,25,56,49,32,56,18,62,45,32,59,74,23,69,39,66,53,50,27,72,22,52,74,24,58,83,42,43,86,78,41,42,67,75,32,38,46,76,15,63,75,82,26,29,86,91,30,56,40,60,52,60,40,21,32,41,63,39,39,64,50,68,33,90,58,39,36,30,63,53,76,40,33,52,68,67,43,11,44,56,24,34,36,63,55,79,67,61,93,41,54,33,72,59,23,61,43,21,72,48,43,49,38,67,82,65,28,48,37,47,52,32,68,54,48,72,62,50,16,25,43,51,35,20,38,39,46,75,10,24,95,50,93,27,88,52,38,64,46,57,39,46,48,82,38,88,83,58,26,61,60,22,79,64,65,13,78,55,45,28,47,22,19,45,45,53,24,57,31,58,57,72,48,55,87,7,32,96,67,74,59,21,84,53,58,48,50,34,79,56,59,58,49,85,93,49,75,73,53,37,63,69,67,73,51,44,59,68,52,37,72,77,13,42,34,15,76,83,52,18,54,35,38,60,52,45,7,32,74,41,69,24,64,54,48,54,55,45,47,24,57,46,31,27,48,44,30,57,96,27,27,58,33,72,53,17,55,57,44,14,50,44,46,44,27,63,27,76,30,80,40,67,24,34,93,86,45,36,40,12,82,49,29,59,72,41,57],[1,3,3,3,5,3,1,2,3,3,4,3,2,5,2,4,2,2,2,2,2,2,2,1,2,4,3,5,4,1,3,2,2,3,2,4,2,2,7,4,3,3,2,3,2,3,4,3,2,4,1,2,4,3,2,3,3,4,2,4,5,1,2,1,2,4,2,3,1,3,1,5,1,4,1,3,2,1,2,3,5,3,2,3,2,5,2,2,2,5,2,5,1,1,1,3,2,1,2,4,1,3,2,2,1,2,2,1,3,1,4,1,6,1,2,5,5,2,1,4,4,5,7,5,3,2,2,3,3,2,6,3,1,3,5,3,5,3,3,5,3,7,2,3,2,3,4,3,6,3,3,2,1,4,2,7,3,8,2,3,3,3,3,2,1,3,3,1,4,2,4,3,4,3,2,4,3,3,1,2,3,2,3,1,6,1,4,3,2,4,3,7,1,5,4,4,4,4,6,3,3,3,2,4,3,4,2,2,2,7,3,2,2,4,3,5,3,4,3,4,3,1,2,2,1,3,4,2,3,3,4,3,1,4,3,2,4,2,3,7,3,2,2,4,6,3,4,3,6,4,3,3,2,2,1,3,2,1,3,3,4,1,3,2,1,1,4,1,1,4,2,4,2,4,1,3,4,3,2,2,2,3,5,4,4,2,3,2,4,4,3,3,6,2,3,4,4,1,3,2,2,6,3,3,6,3,2,7,3,4,5,4,3,3,2,2,2,3,2,4,2,5,2,2,2,2,3,2,3,5,4,5,6,2,3,2,2,1,5,3,6,2,3,6,2,2,1,3,5,1,2,4,1,4,8,5,3,4,3,4,1,3,3,2,4,6,3,2,4,4,6,2,5,3,2,2,4,1,3,3,2,2,1,1,2,1,4,2,7,5,4,4,4,3,2,5,3,3,1,2,4,3,4,4,3,2,4,1,3,3,4,4,6,2,5,3,3,4,1,3,3,5,2,1,5,2,1,3,2,2,3,4,3,5,2,3,2,5,4,3,4,5,4,3,7,3,5,3,3,1,2,4,8,6,4,4,2,3,3,1,2,5,2,3,2,2,3,2,3,3,2,2,1,6,2,6,3,3,4,2,3,3,3,2,2,1,4,4,4,2,3,4,5,2,3,2,3,1,3,3,3,4,4,1,3,4,4,4,1,4,2,6,5,3,1,4,3,1,3,2,4,2,2,5,3,4,1,1,3,2,2,3,2,4,1,7,3,3,4,3,2,3,6,2,4,3,4,5,6,5,2,2,4,2,4,6,3,1,3,4,2,7,4,5,2,5,4,3,2,1,3,4,2,3,2,2,1,3,3,4,4,1,3,2,1,2,2,6,6,3,6,5,1,3,2,3,3,4,3,1,2,2,2,3,3,2,4,2,3,2,2,4,2,1,5,2,2,3,4,3,5,1,3,4,2,5,3,5,2,3,5,3,3,3,5,4,2,4,2,2,3,2,3,5,2,2,1,5,3,4,2,4,5,3,2,3,5,1,2,5,3,6,4,1,2,3,4,2,3,4,1,5,2,2,6,4,3,5,2,6,3,1,3,2,4,2,5,1,3,3,5,3,2,3,1,1,2,3,2,4,1,3,4,3,2,1,3,3,1,3,4,6,6,1,2,2,3,2,6,1,4,1,6,1,3,7,3,2,2,7,5,1,1,3,3,4,3,4,7,5,2,1,1,2,3,1,3,3,2,3,3,4,2,4,2,5,4,5,2,3,1,3,1,3,2,3,5,3,4,2,5,4,4,1,3,3,1,2,3,2,5,1,1,2,2,4,5,1,4,2,4,2,3,3,4,2,3,4,2,5,1,5,3,2,2,3,2,3,3,3,3,2,5,3,1,2,2,4,3,3,1,2,2,2,2,4,1,2,2,3,2,4,5,5,2,3,4,2,3,3,1,3,3,2,3,5,3,5,4,4,3,6,5,2,3,3,1,1,4,6,1,2,1,3,2,5,2,6,2,3,5,5,6,2,4,2,1,1,3,3,4,2,3,3,3,5,2,1,1,1,5,4,3,2,2,2,3,3,6,5,3,3,5,3,5,1,2,2,4,2,2,3,1,2,1,1,3,6,6,4,3,3,2,2,3,2,4,3,1,2,2,7,1,3,1,3,2,3,2,3,5,3,4,4,3,3,2,1,3,2,4,6,2,4,4,1,5,3,1,3,2,3,5,4,1,1,3,2,3,2,9,4,1,4,2,4,4,2,6,3,4,5,1,3,7,2,1,7,1,2,3,3,7,1,4,1,4,2,6,2,4,3,1,2,4,2,3,1,6,7,2,5,1,4,4,2,3,3,3,4,2,3,2,6,3,2,4,4,2,2,2,4,1,5,4,2,3,3,5,2,5,2,3,4,5,3,3,1,2,4,2,5,2,2,3,2,3,6,3,4,3,3,4,2,2,4,6,1,3,2,1,1,2,2,4,2,2,2,3,2,3,7,5,2,2,2,3,1,2,3,1,1,1,2,3,1,4,5,4,2,1,3,1,1,1,2,2,3,3,3,4,2,2,7,1,5,4,2,4,2,2,4,2,4,2,3,3,1,4,2,5,4,2,2,3,2,5,2,2,5,3,3,1,4,3,3,2,2,2,3,2,1,3,1,1,2,2,1,2,1,2,5,4,1,3,4,3,3,4,3,2,1,1,2,5,5,3,2,2,2,3,2,4,5,3,2,4,3,3,3,2,3,2,3,4,2,2,3,2,2,3,2,4,2,1,6,4,5,3,4,3,2,5,2,5,4,1,4,4,2,2,6,3,3,4,3,3,2,1,6,2,2,5,4,3,5,2,3,2,1,4,1,3,3,2,1,3,2,4,4,6,2,2,4,2,3,4,3,2,5,5,3,4,5,1,3,3,3,1,3,1,3,3,3,3,3,3,4,5,4,3,1,2,1,3,1,2,2,3,1,1,2,3,5,3,5,2,4,3,3,2,4,2,1,3,5,4,2,3,3,3,3,4,2,2,3,3,4,4,2,1,4,4,4,2,3,1,1,1,2,2,3,1,2,1,2,6,3,1,2,4,4,4,4,2,4,2,2,2,2,3,5,2,4,4,4,2,3,1,3,3,4,1,1,4,2,2,2,1,4,2,6,4,5,1,7,3,3,2,3,3,4,4,5,4,1,5,2,3,3,2,3,7,2,2,2,4,1,4,4,3,3,5,4,3,4,1,2,2,1,2,2,3,4,2,8,4,1,1,2,6,4,5,3,2,4,3,2,2,3,1,4,1,2,3,2,3,6,6,1,1,2,2,5,4,2,3,2,3,2,2,4,3,3,3,3,3,1,2,2,5,4,4,5,5,2,2,3,2,2,2,3,5,5,2,2,3,1,3,3,4,4,2,3,7,3,2,2,1,4,3,1,6,3,3,3,3,2,4,4,3,3,3,4,5,4,3,5,2,3,3,3,2,4,1,2,3,3,2,2,4,2,3,1,2,5,6,3,3,1,5,2,3,3,2,2,3,2,4,2,8,2,2,3,3,2,5,1,3,2,3,4,1,4,2,3,3,1,3,2,5,1,2,1,1,1,4,1,3,2,3,3,4,1,1,3,2,1,3,3,4,4,2,4,2,4,3,3,3,2,3,2,5,1,2,4,1,4,1,6,2,2,1,3,3,1,6,2,3,3,4,2,1,2,3,2,4,3,2,3,4,4,4,5,2,3,2,2,7,3,3,4,3,3,3,5,2,3,2,5,1,1,4,2,2,5,4,5,5,2,5,4,3,2,2,3,2,6,3,5,3,2,3,3,2,3,4,2,4,2,5,3,7,2,3,2,2,2,3,2,1,3,3,3,2,2,3,2,2,3,1,1,3,4,1,3,4,2,1,1,3,3,3,1,1,3,5,3,2,2,2,3,3,2,2,3,2,2,3,1,2,2,4,3,2,2,2,3,3,3,4,3,3,5,3,3,1,4,5,4,3,2,2,2,3,5,3,2,1,4,4,3],[false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false],[18.3,18.6,24.2,19.1,21.2,20.2,18.9,28.8,19.9,21.4,18.1,17.3,19.6,18.5,22.1,21.8,27,20.2,19.9,27.1,21.6,24.8,24.4,22.4,28.6,22.2,22.4,31,18.3,23.6,23.7,26,19.8,25.1,23.7,22.6,20.1,24.7,17.9,20.1,26.7,31.3,26.7,27.3,22.2,20.8,23.7,20.6,21.3,28.2,22.5,25.8,29.4,27.4,32.2,23.4,16.8,29.1,23.2,28.2,26.6,31.9,24.9,16.6,23.3,27.3,21.4,20.9,21.8,25.4,24.9,26.8,31.7,25.7,27.7,21.1,24.1,23.1,23.7,17.3,23.4,30.3,27.9,25.3,20.8,24.6,25.4,20.8,20.8,29.2,20.9,28,22.1,30,22.3,24,22.2,20.2,25.1,26.3,21.7,19.2,29.8,30.1,18.7,24.3,21.1,22.9,18.4,23.6,23.7,25.8,30.3,26.2,31.8,29.2,27.3,18.6,21.4,25.6,19.9,20.7,19.9,21.9,17.4,24.9,26.3,17.3,17.7,23.7,16.3,22.1,28.4,23.3,24.5,17.7,30.3,23.2,29.4,18.9,24.5,23.1,28.9,18.4,25.1,17.9,29.4,31.9,30.8,18.4,24.1,27.9,27.6,26.3,27,22.9,27.6,16.3,27.1,26.3,17.2,28.3,24.9,21.2,20.4,24.9,17.7,26.3,20.6,23.7,28.3,24.9,27.8,24.8,26.4,30.2,28,26.7,20.1,19.3,26.6,27.6,21.2,31.7,24.1,22.8,30.8,23.7,17.6,20.2,19.7,23.3,23.3,17.7,16.6,16.4,19.3,19.4,24.4,22.6,16.9,23,29.9,23.9,20.6,26.3,21.7,20.9,26.7,24.3,21.2,32.2,22.1,24.2,23.8,26.1,24.3,25.4,17.9,17.9,20,31.5,25.9,21,26.8,20.9,24.9,26.3,22.7,18.2,24.8,16.2,25.4,21.7,28,19.7,23.7,17.9,19.7,31.6,17.4,24.3,28.7,27.2,25.6,22.3,16.5,20.3,18,25.9,22.6,23.3,24.9,24.7,26.3,21.8,21.2,30.3,30.6,29,22.7,24.1,25.4,27.4,21.9,26.3,21.9,20.2,21.2,20.6,27.4,22.3,17.9,18.3,22.3,21.7,24,25.1,21.8,25,18.1,16.1,31.1,25.8,25.2,24.8,26.8,21.9,16,20.1,24.2,22.6,19.6,30.9,17.3,15.7,18.3,20.1,17.3,24.2,22.1,24.8,22.7,19.9,20.4,17.8,23.7,19.7,29.3,18.7,23.3,21,28.8,22.3,25.3,22.9,20.9,17.4,21.8,21.9,23.1,29.4,29.9,26.3,24.3,26.8,27,28.1,17.9,24.3,26.9,25,24.3,16.7,19.8,27.7,23.6,19.1,30.8,18,22.9,25.4,27.4,18.8,16.3,16.8,28.3,27.1,17.7,27.5,29,22.1,24.8,24.7,30.5,16.6,25.4,21.2,31.1,17.1,27.4,24.9,28.2,26.9,21.3,20.9,24.2,26.2,25.7,30.9,17.4,31.4,24.1,28.1,24.3,31.6,27.3,24.1,21.1,23.3,24.1,18.7,20.6,27,29.2,30.8,31.1,30.9,23.6,24.2,17.6,25.3,27.8,26.8,26.2,26.7,22.6,21.6,29.6,24.6,17.2,22.7,22.4,28.8,24.8,31.6,24.1,28.4,27.2,28.9,27.5,26.8,20.8,30,27,24.1,21.7,30.1,25.7,21.8,22.7,18.3,24.8,19.7,21,17.9,19.7,25.4,32.1,19.6,20.4,25.1,24.3,22.6,29.1,20.1,25.6,20.2,30.1,17.3,31.1,27.9,27.6,18.9,20.6,31.8,22.7,21.1,28.9,23.3,19.4,26.1,28.8,27.8,20.9,18.9,28.4,25.3,19.1,17.7,22.1,21.8,17.4,22.6,31,31.3,19.4,22.6,24,25,31.3,23.4,26.4,15.7,22.2,18,27.8,26.3,29.4,30.8,22,18.4,19.3,18.4,29.7,28.6,23.6,22.4,21,21.8,22.1,24.4,22.2,15.6,31.2,31.2,30.7,21.4,16.5,21.7,28.4,27.6,17.3,22.4,28.5,32,19.2,28.5,24.7,23.9,30.3,31.1,30.2,23.9,25.1,27.1,25.9,26.6,27.6,29.9,20.8,23.5,20.2,25.7,20.1,16.6,28.7,26.4,22.7,15.9,27.7,22.8,26.2,21.8,21.4,32.1,27.9,19.6,29.6,32,29,27.2,26.8,25.6,18.2,22.2,22.9,24.2,25.6,16.4,18.6,31.8,25.5,21.3,21.8,24.4,24.4,31,24.4,22,20.4,27.2,22.6,27.9,27.8,17.3,21.8,18.4,18.3,24.8,23.8,27.8,20.2,32.2,23.2,27.7,16.3,22.3,15.8,24.7,17.2,26.9,27.6,26.8,24.4,23.9,28.8,24.7,31.6,24.4,25.2,22.2,17.8,25.7,22.5,23.6,19.9,16.8,25.6,17.1,20.8,19.7,28.7,30.9,30.2,21.7,19.7,22.9,28.3,22.4,23.3,21,27.8,27.3,25.1,31.3,25.6,26.1,30.8,24.3,22.5,20.1,19.9,22.6,20.1,21.7,21.4,26.4,20.6,18.3,22.4,25.8,28.1,28.6,24.2,19.5,26.9,20.6,22.7,27.9,24.3,23.7,29.6,27.8,28.8,24.8,25.7,18.8,24.2,32,19.1,21.1,24.2,20.6,26.5,27.7,19.2,17,27.7,30.2,23.2,27.8,21.9,28.1,22.8,27.2,32,23.4,25.1,25.6,20.4,26.1,29.5,25.3,24.9,27.3,26.4,16.9,18.3,29.9,30.2,25.3,24.8,21.2,27,20.4,19.7,21.1,23.4,24,31.3,23.3,23.5,19,18.4,23.3,24.7,28.3,17.4,30.1,30.8,28.4,22.9,25.1,16,28.1,26.3,27.8,21.8,25.7,25,20,23.6,19.6,24.7,27.3,17.2,25.7,26.6,18.9,22.4,15.7,18.9,19.6,25.2,28.7,16.2,25.1,23.2,23.8,16.8,24.9,28.4,23.1,22.8,22.7,16,22.1,21.7,22.3,22.6,22.9,22.7,17.1,20.5,21.9,18.4,18.3,28.1,24.4,24.5,26,30.8,23.1,30.2,22.3,23.1,26.7,22.1,28.7,29.7,27.4,26.9,26.4,17.7,21.8,19.2,23.7,26.7,26.3,26.9,20.9,17.1,24.5,22,16.5,23.5,31.5,27.7,23.3,19.5,17.2,27.6,28.2,20.7,23.7,19.8,21.1,24.1,16.1,22.8,29.4,26.7,29.9,32.1,20.2,27.7,31.1,20.7,20.9,27,22.3,26.8,22.5,28.6,23.6,21.2,19.2,21.8,24.6,21.7,27.6,28.9,28.6,26.3,26,23.2,19.7,22.8,28.9,18.3,16.3,26.2,28.1,31.9,20.4,24.3,31.7,19.1,16.6,28.2,25.7,27.5,16.1,21.8,21.1,22.3,32.2,20.4,26.1,30,27.3,24,26.9,25.9,16.4,26.1,25.9,24.7,21.9,21.4,29.2,31.8,26.4,26.9,26.1,23.8,29,28.6,22.5,17.6,25.3,31,23.4,27.7,20.3,25.7,29.2,25.1,19.8,23.8,26.6,25.9,23.9,28.4,26.6,28.3,25,24.9,26.9,15.8,25.3,20.4,19.1,29.3,25.4,28.1,20.5,28.3,27.2,23.6,28.2,31.4,25.1,23.5,29.1,17,22.1,20.7,29.2,24.1,21.1,17.2,29.6,19.5,24.9,30.3,22.7,25.7,24.1,20.8,30.3,19.9,27.5,15.9,21.8,20.4,26.5,32.2,24,25,24.9,24.5,20.9,20.1,27.2,24.3,26.7,23.4,24.4,20.9,22.3,23.6,25.1,18.4,18.5,21.1,30.1,24.2,23.2,27.4,22.5,21.7,20.3,24.2,27,21.4,26.1,20.3,18.5,16.3,31.9,24.4,25.3,30.8,17.3,18.6,23.2,16.3,29.9,23.4,18.4,29.9,21.1,26.4,27.9,23.9,27.3,19.9,19.7,23.8,16.9,29.4,26.4,22.9,19.9,26.2,26.1,23.9,22.4,18.2,24,26.9,20.9,29.2,23,24.6,29.6,27,19.1,18.2,31.9,23.7,17.1,27.4,27.6,26,22.7,27.8,28.8,22.3,20.6,26.1,23.3,23.5,22.7,23.2,19.9,26.5,17.2,25.3,27.8,31.4,21,28.5,22.5,23.7,19.8,16.3,19.4,19.6,23.4,21.8,23.4,21.1,19.8,29.1,22,27.7,28.7,31.1,24.3,27.3,18.3,24.8,20.9,21.4,26.7,30.2,23.7,27.4,22.1,18.8,18,29.2,26.4,21.4,19.6,26.7,21.9,21.9,29.5,22.6,23.8,22.7,25.1,20.1,21.8,22.4,24.4,26.4,23.9,17.2,19.1,27.9,20.7,29.4,27,26.3,23.2,27.7,28.7,18.3,27.7,17.7,25.5,23.2,16.8,26.4,23.3,30.1,23.4,25.6,25.3,27.7,22.4,22.5,22.7,24.9,27.3,26,16.5,18.7,23.4,25.4,25.7,21.2,25.1,29.7,20.4,25.1,22.9,28.5,20,26.8,27.6,27.7,28,19.5,31.2,29,20,27.8,21.1,18.7,19.3,23.4,17.4,21.9,26.9,27.9,24.1,23.9,16.4,29.8,29.4,28.5,18.1,23.3,22.2,21.3,17.8,25.8,17.5,22.5,29.9,26.2,29.6,17,19.5,31,21.3,23.1,19.8,25.4,15.7,32.1,29.9,18.3,30.5,31.2,20.3,25.2,26.4,27.6,22.2,21.6,23.9,17.7,27.1,28.3,25.1,28.7,21.2,24.4,21.8,18.8,20.9,21.4,27.6,28.1,19.3,21.6,27.9,30.6,27,27.1,22.1,21.5,19.9,20.1,26.2,29.9,24.4,29.6,17.9,19.9,29.1,32,17.6,15.9,24.6,21.8,23.8,20.2,18.2,22.1,25.7,27.8,27.6,19.4,22.2,22.9,26.9,16.9,26.5,30.7,16.8,27.5,18.3,19.4,29.4,23.4,18.2,29.8,21.1,27.9,17.8,20.8,25.1,28.3,22.5,24.9,23.2,31.3,21.6,23.6,26.4,28.8,22.1,23.4,25,21.5,22.8,29.2,23.9,22.1,16.9,24.3,29.8,26.9,30.9,18.3,19.9,27.4,29.7,17.3,22.1,16.7,22.4,26.4,21.3,15.7,21.7,21.3,21.1,25.1,22.7,26.7,21.7,26.8,22.6,23.6,17.1,25.3,21.7,20.1,32,21.9,23.8,32.1,19.8,27.3,23.7,22.9,29.1,26.6,25.7,15.9,23.9,26.3,21.6,22.1,31.8,29.4,28.2,16.1,23.4,20.7,20.5,17.7,20,27.4,23.2,24.3,22.2,31.3,30.3,26.8,17.1,17.8,19.8,23.2,17.4,30.7,21.7,24.2,20.9,29.6,20.4,27.7,27.4,26.8,27.2,32.2,31,28.2,28.1,27,19.6,25,26.6,22.9,28,28.4,20.5,29.1,22.3,16.8,30.4,26.3,30.7,20.4,28.7,18.4,27,23.6,24.6,27,26.8,25.3,27.2,17.8,16.7,27.1,22.7,22.1,20.7,24,20.4,24.9,24.6,31.6,27.6,17.4,25.6,26.4,15.9,25.3,24.6,21.6,29.2,25.4,27.7,31.9,24.3,27.4,25.8,23.2,17.8,20.3,23.2,28.4,25.3,23.5,24.4,22.1,21.7,24.8,30.4,29.3,15.6,21.3,20.5,30.6,20.6,17.2,15.7,24.2,19.4,16.6,28.4,29.4,24.9,20.2,24.3,19.5,21.7,27.5,17.6,24.4,26.4,26.2,24.3,22.1,22.2,29.9,22.9,22.8,28.4,16.4,16.2,26.2,23.8,25.6,22.8,23.6,19.1,17.3,25.8,29.7,16.2,23.1,24.7,20.8,22.6,28.7,22.8,23.6,22.7,20,29.7,23.9,20.7,25.6,25.1,23,28.8,29.6,27.3,21.5,22.8,20.1,20.6,23.2,27.8,17,31.8,30.1,26.1,23.9,18.2,27.7,20.8,24.9,26.8,19.8,30.7,19.7,19.4,27.2,31.9,26.6,20.1,23.5,27.3,26,23.8,16.2,24.2,19.9,20.8,20.8,22.4,23.2,26.2,28.4,20.4,31.4,19.1,26.5,26.7,16.9,16.8,27.1,19.2,31.1,27.8,23.7,19.4,21.8,21.6,16.2,31.8,29.6,22.3,26.4,27.1,27.3,31.3,28.2,19.7,17.6,28.2,26.8,17.8,31.7,22.3,21.4,29.7,27.7,25.9,26.3,23.6,25.3,25.2,17.8,28.4,27.1,23.1,22.9,28,24.6,30.5,22.1,26.9,23.5,21.3,20,20.2,26.8,29.1,27.2,21.7,22.3,21.8,19.9,22.9,19.8,22.6,22,16.7,26.2,18.2,19.7,25,25.1,17.8,20.3,28.1,30.4,17.9,32.1,20.7,22.8,16.6,21.8,22.4,22.7,22.2,18.7,22.2,19.2,27.4,24.8,22.1,25.1,15.7,29,28.2,25.9,22.8,15.7,16.2,29.3,18.1,24.4,31.3,28.2,31.7,27.8,23.9,28.6,24.4,17.8,27.9,22.3,20.7,17.6,31,28.6,19.7,30.3,25.1,18.5,22.5,22.2,24.2,28.2,28.4,30.7,21,22.2,20.8,20.4,19.1,31.4,21.8,22.8,30.2,22.2,26.6,21.3,23.7,23.8,24.5,17.3,21.8,23.7,30,20.5,22.4,23.5,22.1,24.3,26.4,22.8,18.1,26.7,24.7,23.3,25.1,23.9,20.8,29.7,25.3,24.8,20.4,22.4,27,25.3,25.7,28.4,19.6,26.7,26.1,21.6,24,26.7,21.9,20.6,24,29,23.4,23.5,28.8,22.5,24,29.7,27.9,26.9,30.2,23.7,15.6,31.4,19,29.3,26,18.7,30.8,17.3,25.6,28.7,26.5,23.6,24.7,30.8,20.2,27.8,18.3,24.6,32.2,29.9,19.8,17.2,22.1,26.4,22.9,17.9,28.2,28.3,22.9,30.1,23,21.1,18.9,24.7,21.6,26.7,19.7,25.7,20.9,23.3,21.7,18.9,21.8,23.1,20.2,21.8,20.9,23.7,22.8,21.3,25.8,21.5,21.4,25,27.9,24.8,26.3,19.6,18.9,20.8,27.3,27.1,26.3,21.2,22.1,18.8,22.8,18.9,21,27.1,22.6,26.3,26.7,19.7,24.6,23.2,30.6,15.9,16.4,21.1,26.9,31.1,23.2,26.2,24.4,21.4,23.7,23.1,31.7],[38,40,70,57,59,49,52,42,66,45,78,58,64,71,49,24,41,58,67,52,62,63,64,60,47,64,42,54,42,56,57,48,50,56,33,64,53,57,47,22,60,46,58,79,33,69,44,49,42,42,33,51,56,47,26,44,55,39,41,33,58,40,95,64,47,50,39,54,50,25,23,58,16,44,73,26,54,72,57,68,36,59,52,69,85,51,65,44,44,42,30,51,49,60,46,36,48,76,56,53,65,75,74,43,48,44,47,56,43,33,46,70,76,44,61,48,48,40,27,75,61,24,44,72,51,52,62,64,58,55,71,74,53,46,50,54,40,59,31,81,14,52,49,57,44,84,47,50,66,60,52,47,46,30,59,56,34,47,68,68,32,61,51,55,37,46,20,39,45,68,34,54,51,30,54,72,63,66,46,63,15,31,47,51,57,60,43,43,44,41,48,62,56,43,40,48,46,67,17,35,58,59,40,46,75,34,75,54,65,42,33,55,56,43,37,68,30,70,41,22,81,55,34,44,38,54,51,32,53,40,59,58,49,38,43,35,61,69,50,54,46,53,76,53,69,53,30,32,35,48,48,67,26,34,24,57,43,23,38,35,54,57,31,64,56,53,53,56,63,42,50,90,34,54,29,53,63,16,41,82,38,29,56,39,71,65,61,29,55,55,20,58,54,34,46,79,61,31,51,75,50,42,66,43,46,62,75,38,46,48,62,72,74,46,63,37,42,32,34,58,60,53,39,54,32,24,42,44,36,21,43,57,61,72,50,82,56,47,22,84,70,59,66,64,62,63,65,40,46,51,37,81,30,52,38,51,52,49,5,14,60,37,51,61,47,39,46,73,72,77,71,27,23,50,47,28,21,67,73,53,52,48,42,29,47,34,52,60,45,71,74,67,29,27,51,52,59,28,46,55,26,52,77,28,69,65,65,70,50,52,35,57,68,52,66,67,31,54,43,47,47,33,63,36,56,24,44,46,40,47,64,58,38,46,48,44,48,45,80,54,57,41,53,54,55,52,78,21,57,57,39,50,36,39,18,68,42,58,46,79,53,81,52,70,51,54,46,51,60,57,26,67,39,63,48,50,57,37,49,39,59,54,29,45,41,40,50,23,77,56,22,36,55,17,43,49,68,74,68,71,42,66,50,76,54,59,55,61,55,43,51,92,34,57,56,64,16,31,51,36,43,59,49,38,45,74,72,43,72,58,62,36,27,69,39,40,53,26,58,69,48,25,41,41,65,65,54,44,47,59,61,75,32,55,53,25,46,42,33,53,15,65,71,67,63,53,52,48,39,52,60,31,46,45,54,37,63,42,68,42,67,45,59,53,48,71,52,56,47,44,81,46,52,54,52,70,33,44,33,40,57,62,90,57,45,35,55,63,43,53,53,44,61,29,79,50,56,51,30,58,48,35,55,21,72,37,48,76,29,74,61,60,18,46,29,39,56,37,65,50,27,62,41,35,66,54,57,54,39,50,47,40,25,56,40,68,64,45,54,63,45,93,58,48,50,49,68,67,51,47,58,41,50,47,29,41,34,63,33,48,36,51,43,83,45,60,55,59,64,42,33,59,36,69,34,13,34,42,77,61,72,31,65,41,62,22,64,45,47,69,55,51,61,37,30,65,70,57,49,70,52,55,51,60,33,43,47,26,61,53,39,55,52,39,50,39,57,29,52,62,52,38,34,26,56,52,50,59,30,57,30,45,19,26,39,54,53,63,56,56,36,33,41,24,48,46,42,52,29,22,58,35,37,43,38,67,64,50,46,41,64,53,53,28,62,41,54,50,68,69,68,48,48,51,56,49,30,37,34,40,68,48,59,48,63,23,43,48,55,46,46,66,58,45,49,59,26,62,69,41,50,27,48,53,39,48,36,48,46,57,60,73,62,44,47,74,32,48,84,44,32,54,31,29,46,32,43,68,78,39,43,53,34,49,34,38,48,48,61,44,58,25,53,62,49,47,44,52,61,63,53,42,74,64,36,52,26,26,38,50,41,67,79,63,68,62,65,85,39,32,87,41,31,34,60,42,44,45,63,49,62,51,66,61,57,60,23,48,44,27,52,58,58,40,55,55,76,33,59,45,53,33,37,27,48,52,46,37,58,63,46,70,31,60,61,37,58,59,66,55,37,42,42,64,41,33,57,62,80,61,49,52,36,81,38,51,61,27,63,54,47,56,43,17,59,43,71,37,59,58,49,33,52,30,39,39,67,26,37,30,55,57,75,39,73,57,53,61,35,46,40,80,38,51,57,17,59,22,55,24,40,51,39,32,77,53,78,40,42,77,50,49,67,40,30,55,43,47,57,27,27,66,50,64,47,57,56,38,67,62,52,49,83,26,35,74,47,25,44,59,66,57,41,27,73,49,41,42,63,29,45,68,58,56,52,39,48,37,61,55,43,66,71,64,64,42,65,32,64,70,55,48,42,31,46,47,67,34,48,43,45,59,50,51,56,27,48,51,45,61,29,9,32,56,75,72,29,37,65,49,56,60,65,73,51,50,21,61,48,29,51,56,30,42,52,33,50,50,72,68,39,74,59,24,35,38,47,42,32,31,68,52,52,49,60,57,55,85,43,62,68,53,31,43,57,42,52,42,57,69,39,33,40,48,39,31,75,42,63,36,43,55,47,61,57,51,46,30,38,33,47,50,59,41,37,50,45,49,86,65,40,62,39,25,68,52,50,39,67,52,68,55,58,37,53,34,15,63,70,55,53,55,23,35,40,47,55,67,72,50,59,46,52,62,56,42,59,62,40,57,63,61,47,61,69,35,18,63,38,39,61,29,54,83,34,43,56,52,33,53,44,35,64,74,28,66,53,57,44,57,54,76,72,44,33,57,30,57,43,67,64,72,42,78,39,32,51,56,68,57,38,62,37,66,55,54,37,40,65,56,42,53,71,44,25,58,50,39,40,51,49,51,46,58,36,38,76,65,43,32,8,63,52,55,52,48,65,56,60,50,60,54,52,55,61,33,22,58,45,24,57,40,60,55,61,23,32,64,46,78,47,20,60,38,74,76,70,54,40,50,41,39,31,52,63,53,40,55,60,53,61,28,49,40,57,70,57,59,42,60,45,42,50,43,80,56,39,45,71,35,32,55,65,21,52,81,54,62,50,40,34,40,30,49,36,54,41,41,61,59,82,50,24,36,59,48,63,64,81,54,48,42,51,56,72,58,30,32,27,65,29,41,32,67,72,61,36,45,53,52,33,46,68,34,61,44,53,58,51,72,29,53,60,49,40,77,63,65,33,43,21,54,24,22,58,27,43,55,48,60,37,43,31,29,49,44,58,34,42,82,54,56,35,78,65,70,61,48,41,37,55,40,52,51,56,46,52,38,36,45,35,53,71,47,56,38,61,49,15,56,59,57,49,58,48,63,32,60,56,60,46,54,58,50,30,57,41,31,59,71,51,61,43,46,66,45,59,41,52,83,64,78,73,59,33,57,50,37,23,26,46,62,18,66,23,45,66,60,53,49,55,44,49,50,72,67,64,56,57,62,56,44,63,57,43,44,36,28,45,62,71,58,62,39,28,43,52,44,64,55,41,70,40,32,53,56,25,49,24,52,47,41,34,47,35,71,59,75,55,61,88,25,19,34,64,29,74,69,83,20,36,61,48,62,34,56,51,51,68,42,55,31,47,26,40,51,63,45,50,65,27,49,49,65,49,37,22,40,66,78,70,37,50,64,43,36,49,36,26,37,71,61,54,47,43,48,53,76,51,48,55,66,73,56,39,56,49,40,30,62,60,49,39,46,35,41,48,50,49,58,16,80,76,56,29,61,15,70,63,30,60,48,52,46,53,65,38,6,73,20,56,50,55,66,50,56,36,53,48,59,61,44,31,33,37,53,39,51,66,43,59,47,44,43,50,42,65,49,59,72,57,27,31,44,62,45,45,56,50,50,46,65,48,54,57,54,54,34,82,57,32,73,46,71,63,45,50,38,22,37,50,44]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>id<\/th>\n      <th>net<\/th>\n      <th>net_num<\/th>\n      <th>malaria_risk<\/th>\n      <th>income<\/th>\n      <th>health<\/th>\n      <th>household<\/th>\n      <th>eligible<\/th>\n      <th>temperature<\/th>\n      <th>insecticide_resistance<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,3,4,5,6,7,9,10]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"id","targets":1},{"name":"net","targets":2},{"name":"net_num","targets":3},{"name":"malaria_risk","targets":4},{"name":"income","targets":5},{"name":"health","targets":6},{"name":"household","targets":7},{"name":"eligible","targets":8},{"name":"temperature","targets":9},{"name":"insecticide_resistance","targets":10}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section><section id="especificar-cuestión-causal" class="level2"><h2 class="anchored" data-anchor-id="especificar-cuestión-causal">Especificar cuestión causal</h2>
<ul>
<li>¿El uso de la mosquitera reduce el riesgo de malaria?</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="1-juego-completo_sin_webr_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 2 × 2
#&gt;   net   malaria_risk
#&gt;   &lt;lgl&gt;        &lt;dbl&gt;
#&gt; 1 FALSE         43.9
#&gt; 2 TRUE          27.5</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 2 × 5
#&gt;   term        estimate std.error statistic  p.value
#&gt;   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
#&gt; 1 (Intercept)     43.9     0.377     116.  0       
#&gt; 2 netTRUE        -16.4     0.741     -22.1 1.10e-95</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 2 × 5
#&gt;   term     estimate std.error statistic   p.value
#&gt;   &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
#&gt; 1 netFALSE     43.9     0.377     116.  0        
#&gt; 2 netTRUE      27.5     0.638      43.1 1.26e-277</code></pre>
</div>
</div>
</section><section id="dibujar-la-asunciones" class="level2"><h2 class="anchored" data-anchor-id="dibujar-la-asunciones">Dibujar la asunciones</h2>
<p>El uso de diagramas causales no es imprescindible, pero ayuda a explicitar las asunciones. Estas asunciones son nuestro modelo de como funcionar las relaciones entre las variables, pero puede que no sean correctas. Siempre habría que chequear el conocimiento experto y confrontar con otras explicaciones.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="1-juego-completo_sin_webr_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
</section><section id="modelar-las-asunciones" class="level2"><h2 class="anchored" data-anchor-id="modelar-las-asunciones">Modelar las asunciones</h2>
<p>Dado el DAG anterior, vamos a utilizar una técnica conocida como <em>propensity score weighting</em>. El objetivo de esta técnica es crear una pseudopoblación que <em>imite</em> como habrían sido los datos si se hubiera hecho un RCT (Randomized Controlled Trial).</p>
<div class="cell">
<details class="code-fold"><summary>Show the code</summary><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">propensity_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span></span>
<span>  <span class="va">net</span> <span class="op">~</span> <span class="va">income</span> <span class="op">+</span> <span class="va">health</span> <span class="op">+</span> <span class="va">temperature</span>,</span>
<span>  data <span class="op">=</span> <span class="va">net_data</span>,</span>
<span>  family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html">binomial</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold"><summary>Show the code</summary><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">propensity_model</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>#&gt;      1      2      3      4      5      6 
#&gt; 0.2464 0.2178 0.3230 0.2307 0.2789 0.3060</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold"><summary>Show the code</summary><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">net_data_with_ipw</span> <span class="op">&lt;-</span> <span class="va">net_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    propensity_score <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">propensity_model</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    ipw <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">net_num</span> <span class="op">==</span> <span class="fl">1</span>, <span class="fl">1</span> <span class="op">/</span> <span class="va">propensity_score</span>, <span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">propensity_score</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Vemos los ipw. Si una observación ha caído en control pero tiene una probabilidad en el modelo de propensity score de 0.9, su peso es de 1 /(1-0.9) = 10 . Es decir, este individuo se considera un muy buen <em>contrafactual</em> para un individuo de iguales características que hubiera caido en tratamiento.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 6 × 4
#&gt;   net   net_num propensity_score   ipw
#&gt;   &lt;lgl&gt;   &lt;dbl&gt;            &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1 FALSE       0            0.475  1.90
#&gt; 2 FALSE       0            0.468  1.88
#&gt; 3 FALSE       0            0.461  1.86
#&gt; 4 FALSE       0            0.451  1.82
#&gt; 5 FALSE       0            0.447  1.81
#&gt; 6 FALSE       0            0.438  1.78</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 6 × 4
#&gt;   net   net_num propensity_score   ipw
#&gt;   &lt;lgl&gt;   &lt;dbl&gt;            &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1 TRUE        1            0.117  8.56
#&gt; 2 TRUE        1            0.120  8.33
#&gt; 3 TRUE        1            0.126  7.92
#&gt; 4 TRUE        1            0.136  7.36
#&gt; 5 TRUE        1            0.138  7.27
#&gt; 6 TRUE        1            0.139  7.19</code></pre>
</div>
</div>
</section><section id="diagnosticar-las-asunciones" class="level2"><h2 class="anchored" data-anchor-id="diagnosticar-las-asunciones">Diagnosticar las asunciones</h2>
<p>¿Qué es lo que ha cambiado al hacer el ipw?</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="1-juego-completo_sin_webr_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="1-juego-completo_sin_webr_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
</section><section id="estimar-el-efecto-causal" class="level2"><h2 class="anchored" data-anchor-id="estimar-el-efecto-causal">Estimar el efecto causal</h2>
<section id="usando-ipw" class="level3"><h3 class="anchored" data-anchor-id="usando-ipw">Usando ipw</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1 × 7
#&gt;   term   estimate std.error statistic  p.value conf.low
#&gt;   &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
#&gt; 1 netTR…    -12.5     0.624     -20.1 5.50e-81    -13.8
#&gt; # ℹ 1 more variable: conf.high &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Pero una vez se ha hecho el ipw, la varianza del estimador que da el modelo <code>lm</code> no es correcta, hay que calcularla usando otras técnicas, como estimadores robustos o bootstrap. Usaremos bootstrap</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # Bootstrap sampling with apparent sample 
#&gt; # A tibble: 1,001 × 2
#&gt;    splits             id           
#&gt;    &lt;list&gt;             &lt;chr&gt;        
#&gt;  1 &lt;split [1752/644]&gt; Bootstrap0001
#&gt;  2 &lt;split [1752/647]&gt; Bootstrap0002
#&gt;  3 &lt;split [1752/641]&gt; Bootstrap0003
#&gt;  4 &lt;split [1752/648]&gt; Bootstrap0004
#&gt;  5 &lt;split [1752/647]&gt; Bootstrap0005
#&gt;  6 &lt;split [1752/646]&gt; Bootstrap0006
#&gt;  7 &lt;split [1752/635]&gt; Bootstrap0007
#&gt;  8 &lt;split [1752/659]&gt; Bootstrap0008
#&gt;  9 &lt;split [1752/662]&gt; Bootstrap0009
#&gt; 10 &lt;split [1752/647]&gt; Bootstrap0010
#&gt; # ℹ 991 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # Bootstrap sampling with apparent sample 
#&gt; # A tibble: 1,001 × 3
#&gt;    splits             id            boot_fits       
#&gt;    &lt;list&gt;             &lt;chr&gt;         &lt;list&gt;          
#&gt;  1 &lt;split [1752/644]&gt; Bootstrap0001 &lt;tibble [2 × 5]&gt;
#&gt;  2 &lt;split [1752/647]&gt; Bootstrap0002 &lt;tibble [2 × 5]&gt;
#&gt;  3 &lt;split [1752/641]&gt; Bootstrap0003 &lt;tibble [2 × 5]&gt;
#&gt;  4 &lt;split [1752/648]&gt; Bootstrap0004 &lt;tibble [2 × 5]&gt;
#&gt;  5 &lt;split [1752/647]&gt; Bootstrap0005 &lt;tibble [2 × 5]&gt;
#&gt;  6 &lt;split [1752/646]&gt; Bootstrap0006 &lt;tibble [2 × 5]&gt;
#&gt;  7 &lt;split [1752/635]&gt; Bootstrap0007 &lt;tibble [2 × 5]&gt;
#&gt;  8 &lt;split [1752/659]&gt; Bootstrap0008 &lt;tibble [2 × 5]&gt;
#&gt;  9 &lt;split [1752/662]&gt; Bootstrap0009 &lt;tibble [2 × 5]&gt;
#&gt; 10 &lt;split [1752/647]&gt; Bootstrap0010 &lt;tibble [2 × 5]&gt;
#&gt; # ℹ 991 more rows</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 2 × 5
#&gt;   term        estimate std.error statistic  p.value
#&gt;   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
#&gt; 1 (Intercept)     42.7     0.457      93.3 0       
#&gt; 2 netTRUE        -11.8     0.645     -18.3 2.75e-68</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="1-juego-completo_sin_webr_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1 × 6
#&gt;   term    .lower .estimate .upper .alpha .method   
#&gt;   &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;     
#&gt; 1 netTRUE  -13.6     -12.5  -11.5   0.01 percentile</code></pre>
</div>
</div>
</section><section id="usando-reglas-de-pearl" class="level3"><h3 class="anchored" data-anchor-id="usando-reglas-de-pearl">Usando reglas de Pearl</h3>
<p>Pensemos como cortar los caminos no causales</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="1-juego-completo_sin_webr_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
<p>Pero la librería dagitty nos sirve para esto</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; { health, income, temperature }</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="1-juego-completo_sin_webr_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1 × 7
#&gt;   term  estimate std.error statistic   p.value conf.low
#&gt;   &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
#&gt; 1 netT…    -12.0     0.314     -38.2 2.69e-232    -12.6
#&gt; # ℹ 1 more variable: conf.high &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Solapamiento income</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">Solapamiento temperature</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false" href="">Solapamiento health</a></li>
</ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="1-juego-completo_sin_webr_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="1-juego-completo_sin_webr_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="1-juego-completo_sin_webr_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section id="modelo-bayesiano" class="level3"><h3 class="anchored" data-anchor-id="modelo-bayesiano">Modelo bayesiano</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;  Family: gaussian 
#&gt;   Links: mu = identity; sigma = identity 
#&gt; Formula: malaria_risk ~ net + income + temperature + health 
#&gt;    Data: net_data (Number of observations: 1752) 
#&gt;   Draws: 4 chains, each with iter = 4000; warmup = 1000; thin = 1;
#&gt;          total post-warmup draws = 12000
#&gt; 
#&gt; Regression Coefficients:
#&gt;             Estimate Est.Error l-95% CI u-95% CI Rhat
#&gt; Intercept      79.36      1.03    77.35    81.39 1.00
#&gt; netTRUE       -12.00      0.31   -12.61   -11.39 1.00
#&gt; income         -0.08      0.00    -0.08    -0.07 1.00
#&gt; temperature     1.01      0.03     0.94     1.08 1.00
#&gt; health          0.14      0.01     0.12     0.16 1.00
#&gt;             Bulk_ESS Tail_ESS
#&gt; Intercept      11125    10282
#&gt; netTRUE        10925     8382
#&gt; income         11593     9652
#&gt; temperature    10913     8132
#&gt; health         11001     9015
#&gt; 
#&gt; Further Distributional Parameters:
#&gt;       Estimate Est.Error l-95% CI u-95% CI Rhat
#&gt; sigma     5.70      0.10     5.51     5.89 1.00
#&gt;       Bulk_ESS Tail_ESS
#&gt; sigma    12498     8777
#&gt; 
#&gt; Draws were sampled using sample(hmc). For each parameter, Bulk_ESS
#&gt; and Tail_ESS are effective sample size measures, and Rhat is the potential
#&gt; scale reduction factor on split chains (at convergence, Rhat = 1).</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;           Estimate Est.Error   Q2.5  Q97.5
#&gt; b_netTRUE      -12      0.31 -12.61 -11.39</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="1-juego-completo_sin_webr_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
</section></section><section id="análisis-de-sensibilidad" class="level2"><h2 class="anchored" data-anchor-id="análisis-de-sensibilidad">Análisis de sensibilidad</h2>
<p>Y si hubiera una variable de confusión no observada?. Si fuera un RCT, el mismo mecanismo de aleatorización nos <em>protege</em> frente a esas variables, pero no en un estudio observacional.</p>
<p>Imaginemos que existe una variable de confusión que es resistencia genética de la población a la malaria.</p>
<p>Suponemos lo siguiente.</p>
<ol type="1">
<li>Está asociada con la variable respuesta, porque en media la gente con resistencia genética tiene una reducción de riesgo alrededor de 10.</li>
<li>Está asociada con la variable de tratamiento, puesto que entre los que usan mosquiteras, el 26 % tienen esta resistencia. Pero entre los que no usan mosquiteras, solo el 5% la tienen.</li>
</ol>
<p>Con la librería <a href="https://cran.r-project.org/web/packages/tipr/index.html"><code>tipr</code></a> se puede inferir cuál sería el efecto si existiera ese confounder no observado.</p>
</section><section id="verdadero-dag" class="level2"><h2 class="anchored" data-anchor-id="verdadero-dag">Verdadero DAG</h2>
<p>Y después de todo, como los datos son simulados sabemos que existe una variable de confusión</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="1-juego-completo_sin_webr_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Rows: 1,752
#&gt; Columns: 11
#&gt; $ id                     &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8…
#&gt; $ net                    &lt;lgl&gt; FALSE, FALSE, FALSE, F…
#&gt; $ net_num                &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0…
#&gt; $ malaria_risk           &lt;int&gt; 38, 48, 32, 55, 36, 30…
#&gt; $ income                 &lt;int&gt; 779, 700, 1083, 753, 9…
#&gt; $ health                 &lt;int&gt; 35, 35, 58, 68, 46, 37…
#&gt; $ household              &lt;int&gt; 1, 3, 3, 3, 5, 3, 1, 2…
#&gt; $ eligible               &lt;lgl&gt; FALSE, FALSE, FALSE, F…
#&gt; $ temperature            &lt;dbl&gt; 18.3, 18.6, 24.2, 19.1…
#&gt; $ insecticide_resistance &lt;int&gt; 38, 40, 70, 57, 59, 49…
#&gt; $ genetic_resistance     &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 1…</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1 × 6
#&gt;   term    .lower .estimate .upper .alpha .method  
#&gt;   &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;    
#&gt; 1 netTRUE  -11.2     -10.3  -9.30   0.05 student-t</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;  Family: gaussian 
#&gt;   Links: mu = identity; sigma = identity 
#&gt; Formula: malaria_risk ~ net + income + temperature + health + genetic_resistance 
#&gt;    Data: net_data_full (Number of observations: 1752) 
#&gt;   Draws: 4 chains, each with iter = 4000; warmup = 1000; thin = 1;
#&gt;          total post-warmup draws = 12000
#&gt; 
#&gt; Regression Coefficients:
#&gt;                    Estimate Est.Error l-95% CI
#&gt; Intercept             79.29      0.90    77.52
#&gt; netTRUE               -9.86      0.29   -10.44
#&gt; income                -0.08      0.00    -0.08
#&gt; temperature            1.04      0.03     0.98
#&gt; health                 0.14      0.01     0.12
#&gt; genetic_resistance    -9.52      0.41   -10.31
#&gt;                    u-95% CI Rhat Bulk_ESS Tail_ESS
#&gt; Intercept             81.03 1.00    10903     9660
#&gt; netTRUE               -9.30 1.00    10819     8422
#&gt; income                -0.07 1.00    11791     9128
#&gt; temperature            1.10 1.00    10462     8164
#&gt; health                 0.16 1.00    11451     8186
#&gt; genetic_resistance    -8.71 1.00     9734     8175
#&gt; 
#&gt; Further Distributional Parameters:
#&gt;       Estimate Est.Error l-95% CI u-95% CI Rhat
#&gt; sigma     4.99      0.08     4.83     5.16 1.00
#&gt;       Bulk_ESS Tail_ESS
#&gt; sigma    11168     8306
#&gt; 
#&gt; Draws were sampled using sample(hmc). For each parameter, Bulk_ESS
#&gt; and Tail_ESS are effective sample size measures, and Rhat is the potential
#&gt; scale reduction factor on split chains (at convergence, Rhat = 1).</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;           Estimate Est.Error   Q2.5 Q97.5
#&gt; b_netTRUE    -9.86      0.29 -10.44  -9.3</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="1-juego-completo_sin_webr_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
<!-- -->

</section></main><!-- /main column --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb23" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "El juego completo"</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co">  html: </span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co">    fig-height: 5</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co">    fig-dpi: 300</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co">    fig-width: 8</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co">    fig-align: center</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-link: true</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-summary: "Show the code"</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true </span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true </span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-depth: 2 </span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="an">engine:</span><span class="co"> knitr</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a><span class="co">  echo: false</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a><span class="co">  warning: false</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="co">  message: false</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a><span class="an">knitr:</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a><span class="co">  opts_chunk:</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a><span class="co">    out.width: 80%</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a><span class="co">    fig.showtext: TRUE</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a><span class="co">    comment: "#&gt;"</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>Veamos un ejemplo completo. No hace falta entenderlo todo. </span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>Iremos viendo luego cada parte. </span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>El ejemplo viene de <span class="co">[</span><span class="ot">aquí</span><span class="co">](https://www.r-causal.org/chapters/02-whole-game)</span></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: true</span></span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"R/ggdag-mask.R"</span>))</span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"R/setup.R"</span>))</span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggdag)</span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true" tabindex="-1"></a>Pasos en el análisis causal.</span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Definir la pregunta causal</span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Especificar las asunciones, una forma es con un diagrama causal</span>
<span id="cb23-49"><a href="#cb23-49" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Modelar las asunciones</span>
<span id="cb23-50"><a href="#cb23-50" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Diagnosticar el modelo</span>
<span id="cb23-51"><a href="#cb23-51" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>Estimar el efecto causal</span>
<span id="cb23-52"><a href="#cb23-52" aria-hidden="true" tabindex="-1"></a><span class="ss">6. </span>Análisis de sensibilidad </span>
<span id="cb23-53"><a href="#cb23-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-54"><a href="#cb23-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-55"><a href="#cb23-55" aria-hidden="true" tabindex="-1"></a><span class="fu">## Datos</span></span>
<span id="cb23-56"><a href="#cb23-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-59"><a href="#cb23-59" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-60"><a href="#cb23-60" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb23-61"><a href="#cb23-61" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb23-62"><a href="#cb23-62" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb23-63"><a href="#cb23-63" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb23-64"><a href="#cb23-64" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(halfmoon)</span>
<span id="cb23-65"><a href="#cb23-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-66"><a href="#cb23-66" aria-hidden="true" tabindex="-1"></a>net_data <span class="ot">&lt;-</span>  <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/net_data.csv"</span>))</span>
<span id="cb23-67"><a href="#cb23-67" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-68"><a href="#cb23-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-69"><a href="#cb23-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-72"><a href="#cb23-72" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-73"><a href="#cb23-73" aria-hidden="true" tabindex="-1"></a>skimr<span class="sc">::</span><span class="fu">skim</span>(net_data <span class="sc">|&gt;</span> <span class="fu">select</span>((<span class="sc">-</span>id)))</span>
<span id="cb23-74"><a href="#cb23-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-75"><a href="#cb23-75" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(net_data)</span>
<span id="cb23-76"><a href="#cb23-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-77"><a href="#cb23-77" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-78"><a href="#cb23-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-79"><a href="#cb23-79" aria-hidden="true" tabindex="-1"></a><span class="fu">## Especificar cuestión causal</span></span>
<span id="cb23-80"><a href="#cb23-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-81"><a href="#cb23-81" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>¿El uso de la mosquitera reduce el riesgo de malaria?</span>
<span id="cb23-82"><a href="#cb23-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-83"><a href="#cb23-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-86"><a href="#cb23-86" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-87"><a href="#cb23-87" aria-hidden="true" tabindex="-1"></a>net_data <span class="sc">|&gt;</span></span>
<span id="cb23-88"><a href="#cb23-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(malaria_risk, <span class="at">fill =</span> net)) <span class="sc">+</span></span>
<span id="cb23-89"><a href="#cb23-89" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">color =</span> <span class="cn">NA</span>, <span class="at">alpha =</span> .<span class="dv">8</span>)</span>
<span id="cb23-90"><a href="#cb23-90" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-91"><a href="#cb23-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-92"><a href="#cb23-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-95"><a href="#cb23-95" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-96"><a href="#cb23-96" aria-hidden="true" tabindex="-1"></a>net_data <span class="sc">|&gt;</span></span>
<span id="cb23-97"><a href="#cb23-97" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(net) <span class="sc">|&gt;</span></span>
<span id="cb23-98"><a href="#cb23-98" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">malaria_risk =</span> <span class="fu">mean</span>(malaria_risk))</span>
<span id="cb23-99"><a href="#cb23-99" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-100"><a href="#cb23-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-101"><a href="#cb23-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-104"><a href="#cb23-104" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-105"><a href="#cb23-105" aria-hidden="true" tabindex="-1"></a><span class="co"># con una regresión obtenemos lo mismo</span></span>
<span id="cb23-106"><a href="#cb23-106" aria-hidden="true" tabindex="-1"></a>net_data <span class="sc">|&gt;</span></span>
<span id="cb23-107"><a href="#cb23-107" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(malaria_risk <span class="sc">~</span> net, <span class="at">data =</span> _) <span class="sc">|&gt;</span></span>
<span id="cb23-108"><a href="#cb23-108" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>()</span>
<span id="cb23-109"><a href="#cb23-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-110"><a href="#cb23-110" aria-hidden="true" tabindex="-1"></a>net_data <span class="sc">|&gt;</span></span>
<span id="cb23-111"><a href="#cb23-111" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(malaria_risk <span class="sc">~</span>  <span class="dv">0</span> <span class="sc">+</span> net, <span class="at">data =</span> _) <span class="sc">|&gt;</span></span>
<span id="cb23-112"><a href="#cb23-112" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>()</span>
<span id="cb23-113"><a href="#cb23-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-114"><a href="#cb23-114" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-115"><a href="#cb23-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-116"><a href="#cb23-116" aria-hidden="true" tabindex="-1"></a><span class="fu">## Dibujar la asunciones</span></span>
<span id="cb23-117"><a href="#cb23-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-118"><a href="#cb23-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-119"><a href="#cb23-119" aria-hidden="true" tabindex="-1"></a>El uso de diagramas causales no es imprescindible, pero ayuda a explicitar las asunciones. Estas asunciones son nuestro modelo de como funcionar las relaciones entre las variables, pero puede que no sean correctas. Siempre habría que chequear el conocimiento experto y confrontar con otras explicaciones. </span>
<span id="cb23-120"><a href="#cb23-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-123"><a href="#cb23-123" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-124"><a href="#cb23-124" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb23-125"><a href="#cb23-125" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb23-126"><a href="#cb23-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-127"><a href="#cb23-127" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb23-128"><a href="#cb23-128" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggdag)</span>
<span id="cb23-129"><a href="#cb23-129" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggokabeito)</span>
<span id="cb23-130"><a href="#cb23-130" aria-hidden="true" tabindex="-1"></a>net_data <span class="ot">&lt;-</span>  <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/net_data.csv"</span>))</span>
<span id="cb23-131"><a href="#cb23-131" aria-hidden="true" tabindex="-1"></a>mosquito_dag <span class="ot">&lt;-</span> <span class="fu">dagify</span>(</span>
<span id="cb23-132"><a href="#cb23-132" aria-hidden="true" tabindex="-1"></a>  malaria_risk <span class="sc">~</span> net <span class="sc">+</span> income <span class="sc">+</span> health <span class="sc">+</span> temperature <span class="sc">+</span> resistance,</span>
<span id="cb23-133"><a href="#cb23-133" aria-hidden="true" tabindex="-1"></a>  net <span class="sc">~</span> income <span class="sc">+</span> health <span class="sc">+</span> temperature <span class="sc">+</span> eligible <span class="sc">+</span> household,</span>
<span id="cb23-134"><a href="#cb23-134" aria-hidden="true" tabindex="-1"></a>  eligible <span class="sc">~</span> income <span class="sc">+</span> household,</span>
<span id="cb23-135"><a href="#cb23-135" aria-hidden="true" tabindex="-1"></a>  health <span class="sc">~</span> income,</span>
<span id="cb23-136"><a href="#cb23-136" aria-hidden="true" tabindex="-1"></a>  <span class="at">exposure =</span> <span class="st">"net"</span>,</span>
<span id="cb23-137"><a href="#cb23-137" aria-hidden="true" tabindex="-1"></a>  <span class="at">outcome =</span> <span class="st">"malaria_risk"</span>,</span>
<span id="cb23-138"><a href="#cb23-138" aria-hidden="true" tabindex="-1"></a>  <span class="at">coords =</span> <span class="fu">list</span>(</span>
<span id="cb23-139"><a href="#cb23-139" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">c</span>(</span>
<span id="cb23-140"><a href="#cb23-140" aria-hidden="true" tabindex="-1"></a>      <span class="at">malaria_risk =</span> <span class="dv">7</span>,</span>
<span id="cb23-141"><a href="#cb23-141" aria-hidden="true" tabindex="-1"></a>      <span class="at">net =</span> <span class="dv">3</span>,</span>
<span id="cb23-142"><a href="#cb23-142" aria-hidden="true" tabindex="-1"></a>      <span class="at">income =</span> <span class="dv">4</span>,</span>
<span id="cb23-143"><a href="#cb23-143" aria-hidden="true" tabindex="-1"></a>      <span class="at">health =</span> <span class="dv">5</span>,</span>
<span id="cb23-144"><a href="#cb23-144" aria-hidden="true" tabindex="-1"></a>      <span class="at">temperature =</span> <span class="dv">6</span>,</span>
<span id="cb23-145"><a href="#cb23-145" aria-hidden="true" tabindex="-1"></a>      <span class="at">resistance =</span> <span class="fl">8.5</span>,</span>
<span id="cb23-146"><a href="#cb23-146" aria-hidden="true" tabindex="-1"></a>      <span class="at">eligible =</span> <span class="dv">2</span>,</span>
<span id="cb23-147"><a href="#cb23-147" aria-hidden="true" tabindex="-1"></a>      <span class="at">household =</span> <span class="dv">1</span></span>
<span id="cb23-148"><a href="#cb23-148" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb23-149"><a href="#cb23-149" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">c</span>(</span>
<span id="cb23-150"><a href="#cb23-150" aria-hidden="true" tabindex="-1"></a>      <span class="at">malaria_risk =</span> <span class="dv">2</span>,</span>
<span id="cb23-151"><a href="#cb23-151" aria-hidden="true" tabindex="-1"></a>      <span class="at">net =</span> <span class="dv">2</span>,</span>
<span id="cb23-152"><a href="#cb23-152" aria-hidden="true" tabindex="-1"></a>      <span class="at">income =</span> <span class="dv">3</span>,</span>
<span id="cb23-153"><a href="#cb23-153" aria-hidden="true" tabindex="-1"></a>      <span class="at">health =</span> <span class="dv">1</span>,</span>
<span id="cb23-154"><a href="#cb23-154" aria-hidden="true" tabindex="-1"></a>      <span class="at">temperature =</span> <span class="dv">3</span>,</span>
<span id="cb23-155"><a href="#cb23-155" aria-hidden="true" tabindex="-1"></a>      <span class="at">resistance =</span> <span class="dv">2</span>,</span>
<span id="cb23-156"><a href="#cb23-156" aria-hidden="true" tabindex="-1"></a>      <span class="at">eligible =</span> <span class="dv">3</span>,</span>
<span id="cb23-157"><a href="#cb23-157" aria-hidden="true" tabindex="-1"></a>      <span class="at">household =</span> <span class="dv">2</span></span>
<span id="cb23-158"><a href="#cb23-158" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-159"><a href="#cb23-159" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb23-160"><a href="#cb23-160" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb23-161"><a href="#cb23-161" aria-hidden="true" tabindex="-1"></a>    <span class="at">malaria_risk =</span> <span class="st">"Risk of malaria"</span>,</span>
<span id="cb23-162"><a href="#cb23-162" aria-hidden="true" tabindex="-1"></a>    <span class="at">net =</span> <span class="st">"Mosquito net"</span>,</span>
<span id="cb23-163"><a href="#cb23-163" aria-hidden="true" tabindex="-1"></a>    <span class="at">income =</span> <span class="st">"Income"</span>,</span>
<span id="cb23-164"><a href="#cb23-164" aria-hidden="true" tabindex="-1"></a>    <span class="at">health =</span> <span class="st">"Health"</span>,</span>
<span id="cb23-165"><a href="#cb23-165" aria-hidden="true" tabindex="-1"></a>    <span class="at">temperature =</span> <span class="st">"Nighttime temperatures"</span>,</span>
<span id="cb23-166"><a href="#cb23-166" aria-hidden="true" tabindex="-1"></a>    <span class="at">resistance =</span> <span class="st">"Insecticide resistance"</span>,</span>
<span id="cb23-167"><a href="#cb23-167" aria-hidden="true" tabindex="-1"></a>    <span class="at">eligible =</span> <span class="st">"Eligible for program"</span>,</span>
<span id="cb23-168"><a href="#cb23-168" aria-hidden="true" tabindex="-1"></a>    <span class="at">household =</span> <span class="st">"Number in the household"</span></span>
<span id="cb23-169"><a href="#cb23-169" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-170"><a href="#cb23-170" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-171"><a href="#cb23-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-172"><a href="#cb23-172" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> mosquito_dag <span class="sc">|&gt;</span></span>
<span id="cb23-173"><a href="#cb23-173" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy_dagitty</span>() <span class="sc">|&gt;</span></span>
<span id="cb23-174"><a href="#cb23-174" aria-hidden="true" tabindex="-1"></a>  <span class="fu">node_status</span>() <span class="sc">|&gt;</span></span>
<span id="cb23-175"><a href="#cb23-175" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb23-176"><a href="#cb23-176" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(x, y, <span class="at">xend =</span> xend, <span class="at">yend =</span> yend, <span class="at">color =</span> status)</span>
<span id="cb23-177"><a href="#cb23-177" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb23-178"><a href="#cb23-178" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_dag_edges</span>() <span class="sc">+</span></span>
<span id="cb23-179"><a href="#cb23-179" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_dag_point</span>() <span class="sc">+</span></span>
<span id="cb23-180"><a href="#cb23-180" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_dag_label</span>(<span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb23-181"><a href="#cb23-181" aria-hidden="true" tabindex="-1"></a>  <span class="co"># geom_dag_label_repel() +</span></span>
<span id="cb23-182"><a href="#cb23-182" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_okabe_ito</span>(<span class="at">na.value =</span> <span class="st">"grey90"</span>) <span class="sc">+</span></span>
<span id="cb23-183"><a href="#cb23-183" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_dag</span>() <span class="sc">+</span></span>
<span id="cb23-184"><a href="#cb23-184" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb23-185"><a href="#cb23-185" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">clip =</span> <span class="st">"off"</span>)</span>
<span id="cb23-186"><a href="#cb23-186" aria-hidden="true" tabindex="-1"></a>p1</span>
<span id="cb23-187"><a href="#cb23-187" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-188"><a href="#cb23-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-189"><a href="#cb23-189" aria-hidden="true" tabindex="-1"></a><span class="fu">## Modelar las asunciones </span></span>
<span id="cb23-190"><a href="#cb23-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-191"><a href="#cb23-191" aria-hidden="true" tabindex="-1"></a>Dado el DAG anterior, vamos a utilizar una técnica conocida como _propensity score weighting_.  El objetivo de esta técnica es crear una pseudopoblación que _imite_ como habrían sido los datos si se hubiera hecho un RCT (Randomized Controlled Trial). </span>
<span id="cb23-192"><a href="#cb23-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-193"><a href="#cb23-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-194"><a href="#cb23-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-197"><a href="#cb23-197" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-198"><a href="#cb23-198" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: TRUE</span></span>
<span id="cb23-199"><a href="#cb23-199" aria-hidden="true" tabindex="-1"></a>propensity_model <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb23-200"><a href="#cb23-200" aria-hidden="true" tabindex="-1"></a>  net <span class="sc">~</span> income <span class="sc">+</span> health <span class="sc">+</span> temperature,</span>
<span id="cb23-201"><a href="#cb23-201" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> net_data,</span>
<span id="cb23-202"><a href="#cb23-202" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="fu">binomial</span>()</span>
<span id="cb23-203"><a href="#cb23-203" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-204"><a href="#cb23-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-205"><a href="#cb23-205" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-206"><a href="#cb23-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-209"><a href="#cb23-209" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-210"><a href="#cb23-210" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: TRUE</span></span>
<span id="cb23-211"><a href="#cb23-211" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">predict</span>(propensity_model, <span class="at">type =</span> <span class="st">"response"</span>))</span>
<span id="cb23-212"><a href="#cb23-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-213"><a href="#cb23-213" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-216"><a href="#cb23-216" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-217"><a href="#cb23-217" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: TRUE</span></span>
<span id="cb23-218"><a href="#cb23-218" aria-hidden="true" tabindex="-1"></a>net_data_with_ipw <span class="ot">&lt;-</span> net_data <span class="sc">|&gt;</span></span>
<span id="cb23-219"><a href="#cb23-219" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb23-220"><a href="#cb23-220" aria-hidden="true" tabindex="-1"></a>    <span class="at">propensity_score =</span> <span class="fu">predict</span>(propensity_model, <span class="at">type =</span> <span class="st">"response"</span>)</span>
<span id="cb23-221"><a href="#cb23-221" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb23-222"><a href="#cb23-222" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb23-223"><a href="#cb23-223" aria-hidden="true" tabindex="-1"></a>    <span class="at">ipw =</span> <span class="fu">ifelse</span>(net_num <span class="sc">==</span> <span class="dv">1</span>, <span class="dv">1</span> <span class="sc">/</span> propensity_score, <span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> propensity_score))</span>
<span id="cb23-224"><a href="#cb23-224" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-225"><a href="#cb23-225" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-226"><a href="#cb23-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-227"><a href="#cb23-227" aria-hidden="true" tabindex="-1"></a>Vemos los ipw. </span>
<span id="cb23-228"><a href="#cb23-228" aria-hidden="true" tabindex="-1"></a>Si una observación ha caído en control pero tiene una probabilidad en el modelo de propensity score de 0.9, su peso es de 1 /(1-0.9) = <span class="in">`r 1 / (1-0.9)`</span> . Es decir, este individuo se considera un muy buen _contrafactual_  para un individuo de iguales características que hubiera caido en tratamiento.</span>
<span id="cb23-229"><a href="#cb23-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-232"><a href="#cb23-232" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-233"><a href="#cb23-233" aria-hidden="true" tabindex="-1"></a>net_data_with_ipw <span class="sc">|&gt;</span></span>
<span id="cb23-234"><a href="#cb23-234" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(net_num <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb23-235"><a href="#cb23-235" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(net,net_num, propensity_score, ipw) <span class="sc">|&gt;</span></span>
<span id="cb23-236"><a href="#cb23-236" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(propensity_score)) <span class="sc">|&gt;</span></span>
<span id="cb23-237"><a href="#cb23-237" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span>
<span id="cb23-238"><a href="#cb23-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-239"><a href="#cb23-239" aria-hidden="true" tabindex="-1"></a>net_data_with_ipw <span class="sc">|&gt;</span></span>
<span id="cb23-240"><a href="#cb23-240" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(net_num <span class="sc">==</span><span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb23-241"><a href="#cb23-241" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(propensity_score) <span class="sc">|&gt;</span></span>
<span id="cb23-242"><a href="#cb23-242" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(net,net_num, propensity_score, ipw) <span class="sc">|&gt;</span></span>
<span id="cb23-243"><a href="#cb23-243" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span>
<span id="cb23-244"><a href="#cb23-244" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-245"><a href="#cb23-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-246"><a href="#cb23-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-247"><a href="#cb23-247" aria-hidden="true" tabindex="-1"></a><span class="fu">## Diagnosticar las asunciones</span></span>
<span id="cb23-248"><a href="#cb23-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-249"><a href="#cb23-249" aria-hidden="true" tabindex="-1"></a>¿Qué es lo que ha cambiado al hacer el ipw?</span>
<span id="cb23-250"><a href="#cb23-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-253"><a href="#cb23-253" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-254"><a href="#cb23-254" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(halfmoon)</span>
<span id="cb23-255"><a href="#cb23-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-256"><a href="#cb23-256" aria-hidden="true" tabindex="-1"></a>net_data_with_ipw <span class="sc">|&gt;</span> </span>
<span id="cb23-257"><a href="#cb23-257" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(propensity_score)) <span class="sc">+</span></span>
<span id="cb23-258"><a href="#cb23-258" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_mirror_histogram</span>(</span>
<span id="cb23-259"><a href="#cb23-259" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">fill =</span> net),</span>
<span id="cb23-260"><a href="#cb23-260" aria-hidden="true" tabindex="-1"></a>    <span class="at">bins =</span> <span class="dv">50</span></span>
<span id="cb23-261"><a href="#cb23-261" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb23-262"><a href="#cb23-262" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> abs) <span class="sc">+</span></span>
<span id="cb23-263"><a href="#cb23-263" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"propensity score"</span>)</span>
<span id="cb23-264"><a href="#cb23-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-265"><a href="#cb23-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-266"><a href="#cb23-266" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-267"><a href="#cb23-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-270"><a href="#cb23-270" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-271"><a href="#cb23-271" aria-hidden="true" tabindex="-1"></a>plot_df <span class="ot">&lt;-</span> <span class="fu">tidy_smd</span>(</span>
<span id="cb23-272"><a href="#cb23-272" aria-hidden="true" tabindex="-1"></a>  net_data_with_ipw,</span>
<span id="cb23-273"><a href="#cb23-273" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(income, health, temperature),</span>
<span id="cb23-274"><a href="#cb23-274" aria-hidden="true" tabindex="-1"></a>  <span class="at">.group =</span> net,</span>
<span id="cb23-275"><a href="#cb23-275" aria-hidden="true" tabindex="-1"></a>  <span class="at">.wts =</span> ipw</span>
<span id="cb23-276"><a href="#cb23-276" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-277"><a href="#cb23-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-278"><a href="#cb23-278" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb23-279"><a href="#cb23-279" aria-hidden="true" tabindex="-1"></a>  plot_df,</span>
<span id="cb23-280"><a href="#cb23-280" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(</span>
<span id="cb23-281"><a href="#cb23-281" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">abs</span>(smd),</span>
<span id="cb23-282"><a href="#cb23-282" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> variable,</span>
<span id="cb23-283"><a href="#cb23-283" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> method,</span>
<span id="cb23-284"><a href="#cb23-284" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> method</span>
<span id="cb23-285"><a href="#cb23-285" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-286"><a href="#cb23-286" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb23-287"><a href="#cb23-287" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_love</span>()</span>
<span id="cb23-288"><a href="#cb23-288" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-289"><a href="#cb23-289" aria-hidden="true" tabindex="-1"></a><span class="fu">## Estimar el efecto causal</span></span>
<span id="cb23-290"><a href="#cb23-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-291"><a href="#cb23-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-292"><a href="#cb23-292" aria-hidden="true" tabindex="-1"></a><span class="fu">### Usando ipw</span></span>
<span id="cb23-293"><a href="#cb23-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-296"><a href="#cb23-296" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-297"><a href="#cb23-297" aria-hidden="true" tabindex="-1"></a>net_data_with_ipw <span class="sc">|&gt;</span></span>
<span id="cb23-298"><a href="#cb23-298" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(malaria_risk <span class="sc">~</span>  net, <span class="at">data =</span> _, <span class="at">weights =</span> ipw) <span class="sc">|&gt;</span></span>
<span id="cb23-299"><a href="#cb23-299" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>(<span class="at">conf.int =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb23-300"><a href="#cb23-300" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">"netTRUE"</span>)</span>
<span id="cb23-301"><a href="#cb23-301" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-302"><a href="#cb23-302" aria-hidden="true" tabindex="-1"></a>Pero una vez se ha hecho el ipw, la varianza del estimador que da el modelo <span class="in">`lm`</span> no es correcta, hay que calcularla usando otras técnicas, como estimadores robustos o bootstrap. Usaremos bootstrap</span>
<span id="cb23-303"><a href="#cb23-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-304"><a href="#cb23-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-307"><a href="#cb23-307" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-308"><a href="#cb23-308" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rsample)</span>
<span id="cb23-309"><a href="#cb23-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-310"><a href="#cb23-310" aria-hidden="true" tabindex="-1"></a><span class="co"># todo el proceso</span></span>
<span id="cb23-311"><a href="#cb23-311" aria-hidden="true" tabindex="-1"></a>fit_ipw <span class="ot">&lt;-</span> <span class="cf">function</span>(split, ...) {</span>
<span id="cb23-312"><a href="#cb23-312" aria-hidden="true" tabindex="-1"></a>  <span class="co"># get bootstrapped data sample with `rsample::analysis()`</span></span>
<span id="cb23-313"><a href="#cb23-313" aria-hidden="true" tabindex="-1"></a>  .df <span class="ot">&lt;-</span> <span class="fu">analysis</span>(split)</span>
<span id="cb23-314"><a href="#cb23-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-315"><a href="#cb23-315" aria-hidden="true" tabindex="-1"></a>  <span class="co"># fit propensity score model</span></span>
<span id="cb23-316"><a href="#cb23-316" aria-hidden="true" tabindex="-1"></a>  propensity_model <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb23-317"><a href="#cb23-317" aria-hidden="true" tabindex="-1"></a>    net <span class="sc">~</span> income <span class="sc">+</span> health <span class="sc">+</span> temperature,</span>
<span id="cb23-318"><a href="#cb23-318" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> .df,</span>
<span id="cb23-319"><a href="#cb23-319" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="fu">binomial</span>()</span>
<span id="cb23-320"><a href="#cb23-320" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-321"><a href="#cb23-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-322"><a href="#cb23-322" aria-hidden="true" tabindex="-1"></a>  <span class="co"># calculate inverse probability weights</span></span>
<span id="cb23-323"><a href="#cb23-323" aria-hidden="true" tabindex="-1"></a>  .df <span class="ot">&lt;-</span>  .df <span class="sc">|&gt;</span></span>
<span id="cb23-324"><a href="#cb23-324" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb23-325"><a href="#cb23-325" aria-hidden="true" tabindex="-1"></a>    <span class="at">propensity_score =</span> <span class="fu">predict</span>(propensity_model, <span class="at">type =</span> <span class="st">"response"</span>)</span>
<span id="cb23-326"><a href="#cb23-326" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb23-327"><a href="#cb23-327" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb23-328"><a href="#cb23-328" aria-hidden="true" tabindex="-1"></a>    <span class="at">ipw =</span> <span class="fu">ifelse</span>(net_num <span class="sc">==</span> <span class="dv">1</span>, <span class="dv">1</span> <span class="sc">/</span> propensity_score, <span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> propensity_score))</span>
<span id="cb23-329"><a href="#cb23-329" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-330"><a href="#cb23-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-331"><a href="#cb23-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-332"><a href="#cb23-332" aria-hidden="true" tabindex="-1"></a>  <span class="co"># fit correctly bootstrapped ipw model</span></span>
<span id="cb23-333"><a href="#cb23-333" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(malaria_risk <span class="sc">~</span> net, <span class="at">data =</span> .df, <span class="at">weights =</span> ipw) <span class="sc">|&gt;</span></span>
<span id="cb23-334"><a href="#cb23-334" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tidy</span>()</span>
<span id="cb23-335"><a href="#cb23-335" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-336"><a href="#cb23-336" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-337"><a href="#cb23-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-338"><a href="#cb23-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-341"><a href="#cb23-341" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-342"><a href="#cb23-342" aria-hidden="true" tabindex="-1"></a>bootstrapped_net_data <span class="ot">&lt;-</span> <span class="fu">bootstraps</span>(</span>
<span id="cb23-343"><a href="#cb23-343" aria-hidden="true" tabindex="-1"></a>  net_data,</span>
<span id="cb23-344"><a href="#cb23-344" aria-hidden="true" tabindex="-1"></a>  <span class="at">times =</span> <span class="dv">1000</span>,</span>
<span id="cb23-345"><a href="#cb23-345" aria-hidden="true" tabindex="-1"></a>  <span class="co"># required to calculate CIs later</span></span>
<span id="cb23-346"><a href="#cb23-346" aria-hidden="true" tabindex="-1"></a>  <span class="at">apparent =</span> <span class="cn">TRUE</span></span>
<span id="cb23-347"><a href="#cb23-347" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-348"><a href="#cb23-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-349"><a href="#cb23-349" aria-hidden="true" tabindex="-1"></a>bootstrapped_net_data</span>
<span id="cb23-350"><a href="#cb23-350" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-351"><a href="#cb23-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-352"><a href="#cb23-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-355"><a href="#cb23-355" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-356"><a href="#cb23-356" aria-hidden="true" tabindex="-1"></a><span class="co"># En cada muestra ejecutamos el proceso completo</span></span>
<span id="cb23-357"><a href="#cb23-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-358"><a href="#cb23-358" aria-hidden="true" tabindex="-1"></a>ipw_results <span class="ot">&lt;-</span> bootstrapped_net_data <span class="sc">|&gt;</span></span>
<span id="cb23-359"><a href="#cb23-359" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">boot_fits =</span> <span class="fu">map</span>(splits, fit_ipw))</span>
<span id="cb23-360"><a href="#cb23-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-361"><a href="#cb23-361" aria-hidden="true" tabindex="-1"></a>ipw_results</span>
<span id="cb23-362"><a href="#cb23-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-363"><a href="#cb23-363" aria-hidden="true" tabindex="-1"></a>ipw_results<span class="sc">$</span>boot_fits[[<span class="dv">1</span>]]</span>
<span id="cb23-364"><a href="#cb23-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-365"><a href="#cb23-365" aria-hidden="true" tabindex="-1"></a><span class="co"># pintamos los resultados</span></span>
<span id="cb23-366"><a href="#cb23-366" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-367"><a href="#cb23-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-368"><a href="#cb23-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-371"><a href="#cb23-371" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-372"><a href="#cb23-372" aria-hidden="true" tabindex="-1"></a>ipw_results <span class="sc">|&gt;</span></span>
<span id="cb23-373"><a href="#cb23-373" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb23-374"><a href="#cb23-374" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimate =</span> <span class="fu">map_dbl</span>(</span>
<span id="cb23-375"><a href="#cb23-375" aria-hidden="true" tabindex="-1"></a>      boot_fits,</span>
<span id="cb23-376"><a href="#cb23-376" aria-hidden="true" tabindex="-1"></a>      <span class="co"># pull the `estimate` for `netTRUE` for each fit</span></span>
<span id="cb23-377"><a href="#cb23-377" aria-hidden="true" tabindex="-1"></a>      <span class="co"># \(.fit) .fit |&gt;</span></span>
<span id="cb23-378"><a href="#cb23-378" aria-hidden="true" tabindex="-1"></a>        <span class="cf">function</span>(x) {</span>
<span id="cb23-379"><a href="#cb23-379" aria-hidden="true" tabindex="-1"></a>          x <span class="sc">|&gt;</span></span>
<span id="cb23-380"><a href="#cb23-380" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">"netTRUE"</span>) <span class="sc">|&gt;</span></span>
<span id="cb23-381"><a href="#cb23-381" aria-hidden="true" tabindex="-1"></a>        <span class="fu">pull</span>(estimate)</span>
<span id="cb23-382"><a href="#cb23-382" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb23-383"><a href="#cb23-383" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-384"><a href="#cb23-384" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb23-385"><a href="#cb23-385" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(estimate)) <span class="sc">+</span></span>
<span id="cb23-386"><a href="#cb23-386" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">"#D55E00FF"</span>, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>)</span>
<span id="cb23-387"><a href="#cb23-387" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-388"><a href="#cb23-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-389"><a href="#cb23-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-392"><a href="#cb23-392" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-393"><a href="#cb23-393" aria-hidden="true" tabindex="-1"></a>boot_estimate <span class="ot">&lt;-</span> ipw_results <span class="sc">|&gt;</span></span>
<span id="cb23-394"><a href="#cb23-394" aria-hidden="true" tabindex="-1"></a>  <span class="co"># intervalo usando percentil</span></span>
<span id="cb23-395"><a href="#cb23-395" aria-hidden="true" tabindex="-1"></a>  <span class="fu">int_pctl</span>(boot_fits, <span class="at">alpha =</span> <span class="fl">0.01</span>) <span class="sc">|&gt;</span></span>
<span id="cb23-396"><a href="#cb23-396" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">"netTRUE"</span>)</span>
<span id="cb23-397"><a href="#cb23-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-398"><a href="#cb23-398" aria-hidden="true" tabindex="-1"></a>boot_estimate</span>
<span id="cb23-399"><a href="#cb23-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-400"><a href="#cb23-400" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-401"><a href="#cb23-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-402"><a href="#cb23-402" aria-hidden="true" tabindex="-1"></a><span class="fu">### Usando reglas de Pearl</span></span>
<span id="cb23-403"><a href="#cb23-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-404"><a href="#cb23-404" aria-hidden="true" tabindex="-1"></a>Pensemos como cortar los caminos no causales</span>
<span id="cb23-405"><a href="#cb23-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-408"><a href="#cb23-408" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-409"><a href="#cb23-409" aria-hidden="true" tabindex="-1"></a>p1</span>
<span id="cb23-410"><a href="#cb23-410" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-411"><a href="#cb23-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-412"><a href="#cb23-412" aria-hidden="true" tabindex="-1"></a>Pero la librería dagitty nos sirve para esto</span>
<span id="cb23-413"><a href="#cb23-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-416"><a href="#cb23-416" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-417"><a href="#cb23-417" aria-hidden="true" tabindex="-1"></a>dagitty<span class="sc">::</span><span class="fu">adjustmentSets</span>(mosquito_dag, <span class="at">effect =</span> <span class="st">"total"</span>)</span>
<span id="cb23-418"><a href="#cb23-418" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-419"><a href="#cb23-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-420"><a href="#cb23-420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-423"><a href="#cb23-423" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-424"><a href="#cb23-424" aria-hidden="true" tabindex="-1"></a><span class="fu">ggdag_adjustment_set</span>(mosquito_dag, <span class="at">effect =</span> <span class="st">"total"</span>)</span>
<span id="cb23-425"><a href="#cb23-425" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-426"><a href="#cb23-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-427"><a href="#cb23-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-430"><a href="#cb23-430" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-431"><a href="#cb23-431" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(malaria_risk <span class="sc">~</span> net <span class="sc">+</span> income <span class="sc">+</span> temperature <span class="sc">+</span> health, <span class="at">data =</span> net_data) <span class="sc">|&gt;</span></span>
<span id="cb23-432"><a href="#cb23-432" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>(<span class="at">conf.int =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb23-433"><a href="#cb23-433" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">"netTRUE"</span>)</span>
<span id="cb23-434"><a href="#cb23-434" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-435"><a href="#cb23-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-436"><a href="#cb23-436" aria-hidden="true" tabindex="-1"></a>:::{.panel-tabset}</span>
<span id="cb23-437"><a href="#cb23-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-438"><a href="#cb23-438" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Solapamiento income</span></span>
<span id="cb23-439"><a href="#cb23-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-442"><a href="#cb23-442" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-443"><a href="#cb23-443" aria-hidden="true" tabindex="-1"></a>net_data <span class="sc">|&gt;</span></span>
<span id="cb23-444"><a href="#cb23-444" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(income, <span class="at">fill =</span> net)) <span class="sc">+</span></span>
<span id="cb23-445"><a href="#cb23-445" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">color =</span> <span class="cn">NA</span>, <span class="at">alpha =</span> .<span class="dv">8</span>)</span>
<span id="cb23-446"><a href="#cb23-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-447"><a href="#cb23-447" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-448"><a href="#cb23-448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-449"><a href="#cb23-449" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Solapamiento temperature</span></span>
<span id="cb23-450"><a href="#cb23-450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-453"><a href="#cb23-453" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-454"><a href="#cb23-454" aria-hidden="true" tabindex="-1"></a>net_data <span class="sc">|&gt;</span></span>
<span id="cb23-455"><a href="#cb23-455" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(temperature, <span class="at">fill =</span> net)) <span class="sc">+</span></span>
<span id="cb23-456"><a href="#cb23-456" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">color =</span> <span class="cn">NA</span>, <span class="at">alpha =</span> .<span class="dv">8</span>)</span>
<span id="cb23-457"><a href="#cb23-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-458"><a href="#cb23-458" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-459"><a href="#cb23-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-460"><a href="#cb23-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-461"><a href="#cb23-461" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Solapamiento health</span></span>
<span id="cb23-462"><a href="#cb23-462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-465"><a href="#cb23-465" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-466"><a href="#cb23-466" aria-hidden="true" tabindex="-1"></a>net_data <span class="sc">|&gt;</span></span>
<span id="cb23-467"><a href="#cb23-467" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(health , <span class="at">fill =</span> net)) <span class="sc">+</span></span>
<span id="cb23-468"><a href="#cb23-468" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">color =</span> <span class="cn">NA</span>, <span class="at">alpha =</span> .<span class="dv">8</span>)</span>
<span id="cb23-469"><a href="#cb23-469" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-470"><a href="#cb23-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-471"><a href="#cb23-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-472"><a href="#cb23-472" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb23-473"><a href="#cb23-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-474"><a href="#cb23-474" aria-hidden="true" tabindex="-1"></a><span class="fu">### Modelo bayesiano</span></span>
<span id="cb23-475"><a href="#cb23-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-476"><a href="#cb23-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-479"><a href="#cb23-479" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-480"><a href="#cb23-480" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cmdstanr)</span>
<span id="cb23-481"><a href="#cb23-481" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(brms)</span>
<span id="cb23-482"><a href="#cb23-482" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(posterior) <span class="co"># para cosas como rvar</span></span>
<span id="cb23-483"><a href="#cb23-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-484"><a href="#cb23-484" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">brms.backend =</span> <span class="st">"cmdstanr"</span>)</span>
<span id="cb23-485"><a href="#cb23-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-486"><a href="#cb23-486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-487"><a href="#cb23-487" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-488"><a href="#cb23-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-489"><a href="#cb23-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-492"><a href="#cb23-492" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-493"><a href="#cb23-493" aria-hidden="true" tabindex="-1"></a>m_bayesian <span class="ot">&lt;-</span> <span class="fu">brm</span>(</span>
<span id="cb23-494"><a href="#cb23-494" aria-hidden="true" tabindex="-1"></a>  malaria_risk <span class="sc">~</span> net <span class="sc">+</span> income <span class="sc">+</span> temperature <span class="sc">+</span> health ,</span>
<span id="cb23-495"><a href="#cb23-495" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> net_data,</span>
<span id="cb23-496"><a href="#cb23-496" aria-hidden="true" tabindex="-1"></a>  <span class="at">seed =</span> <span class="dv">48</span>,</span>
<span id="cb23-497"><a href="#cb23-497" aria-hidden="true" tabindex="-1"></a>  <span class="at">chains =</span> <span class="dv">4</span>,</span>
<span id="cb23-498"><a href="#cb23-498" aria-hidden="true" tabindex="-1"></a>  <span class="at">iter =</span> <span class="dv">4000</span>,</span>
<span id="cb23-499"><a href="#cb23-499" aria-hidden="true" tabindex="-1"></a>  <span class="at">warmup =</span> <span class="dv">1000</span>,</span>
<span id="cb23-500"><a href="#cb23-500" aria-hidden="true" tabindex="-1"></a>  <span class="at">cores =</span> <span class="dv">4</span>, </span>
<span id="cb23-501"><a href="#cb23-501" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"brms_stan_models/net_1"</span>),</span>
<span id="cb23-502"><a href="#cb23-502" aria-hidden="true" tabindex="-1"></a>  <span class="at">file_refit =</span> <span class="st">"on_change"</span></span>
<span id="cb23-503"><a href="#cb23-503" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-504"><a href="#cb23-504" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-505"><a href="#cb23-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-506"><a href="#cb23-506" aria-hidden="true" tabindex="-1"></a><span class="co"># hqy que evitar el exceso de decimales dando impresión de falsa exactitud</span></span>
<span id="cb23-507"><a href="#cb23-507" aria-hidden="true" tabindex="-1"></a>m_bayesian</span>
<span id="cb23-508"><a href="#cb23-508" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-509"><a href="#cb23-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-510"><a href="#cb23-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-513"><a href="#cb23-513" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-514"><a href="#cb23-514" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">posterior_summary</span>(m_bayesian, <span class="at">variable =</span> <span class="st">"b_netTRUE"</span>), <span class="dv">2</span>)</span>
<span id="cb23-515"><a href="#cb23-515" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-516"><a href="#cb23-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-517"><a href="#cb23-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-520"><a href="#cb23-520" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-521"><a href="#cb23-521" aria-hidden="true" tabindex="-1"></a>m_bayesian <span class="sc">|&gt;</span></span>
<span id="cb23-522"><a href="#cb23-522" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span></span>
<span id="cb23-523"><a href="#cb23-523" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb23-524"><a href="#cb23-524" aria-hidden="true" tabindex="-1"></a>  ggdist<span class="sc">::</span><span class="fu">stat_halfeye</span>(</span>
<span id="cb23-525"><a href="#cb23-525" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>( <span class="at">x =</span> b_netTRUE),</span>
<span id="cb23-526"><a href="#cb23-526" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"darkred"</span>,</span>
<span id="cb23-527"><a href="#cb23-527" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.4</span>)  <span class="sc">+</span></span>
<span id="cb23-528"><a href="#cb23-528" aria-hidden="true" tabindex="-1"></a>  ggdist<span class="sc">::</span><span class="fu">theme_ggdist</span>()</span>
<span id="cb23-529"><a href="#cb23-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-530"><a href="#cb23-530" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-531"><a href="#cb23-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-532"><a href="#cb23-532" aria-hidden="true" tabindex="-1"></a><span class="fu">## Análisis de sensibilidad</span></span>
<span id="cb23-533"><a href="#cb23-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-534"><a href="#cb23-534" aria-hidden="true" tabindex="-1"></a>Y si hubiera una variable de confusión no observada?. Si fuera un RCT, el mismo mecanismo de aleatorización nos _protege_ frente a esas variables, pero no en un estudio observacional. </span>
<span id="cb23-535"><a href="#cb23-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-536"><a href="#cb23-536" aria-hidden="true" tabindex="-1"></a>Imaginemos que existe una variable de confusión que es resistencia genética de la población a la malaria.</span>
<span id="cb23-537"><a href="#cb23-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-538"><a href="#cb23-538" aria-hidden="true" tabindex="-1"></a>Suponemos lo siguiente. </span>
<span id="cb23-539"><a href="#cb23-539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-540"><a href="#cb23-540" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Está asociada con la variable respuesta, porque en media la gente con resistencia genética tiene una reducción de riesgo alrededor de 10.</span>
<span id="cb23-541"><a href="#cb23-541" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Está asociada con la variable de tratamiento, puesto que entre los que usan mosquiteras, el 26 % tienen esta resistencia. Pero entre los que no usan mosquiteras, solo el 5% la tienen. </span>
<span id="cb23-542"><a href="#cb23-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-543"><a href="#cb23-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-544"><a href="#cb23-544" aria-hidden="true" tabindex="-1"></a>Con la librería <span class="co">[</span><span class="ot">`tipr`</span><span class="co">](https://cran.r-project.org/web/packages/tipr/index.html)</span> se puede inferir cuál sería el efecto si existiera ese confounder no observado.</span>
<span id="cb23-545"><a href="#cb23-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-546"><a href="#cb23-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-547"><a href="#cb23-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-548"><a href="#cb23-548" aria-hidden="true" tabindex="-1"></a><span class="fu">## Verdadero DAG</span></span>
<span id="cb23-549"><a href="#cb23-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-550"><a href="#cb23-550" aria-hidden="true" tabindex="-1"></a>Y después de todo, como los datos son simulados sabemos que existe una variable de confusión </span>
<span id="cb23-551"><a href="#cb23-551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-554"><a href="#cb23-554" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-555"><a href="#cb23-555" aria-hidden="true" tabindex="-1"></a>mosquito_dag_full <span class="ot">&lt;-</span> <span class="fu">dagify</span>(</span>
<span id="cb23-556"><a href="#cb23-556" aria-hidden="true" tabindex="-1"></a>  malaria_risk <span class="sc">~</span> net <span class="sc">+</span> income <span class="sc">+</span> health <span class="sc">+</span> temperature <span class="sc">+</span> insecticide_resistance <span class="sc">+</span> genetic_resistance,</span>
<span id="cb23-557"><a href="#cb23-557" aria-hidden="true" tabindex="-1"></a>  net <span class="sc">~</span> income <span class="sc">+</span> health <span class="sc">+</span> temperature <span class="sc">+</span> eligible <span class="sc">+</span> household <span class="sc">+</span> genetic_resistance,</span>
<span id="cb23-558"><a href="#cb23-558" aria-hidden="true" tabindex="-1"></a>  eligible <span class="sc">~</span> income <span class="sc">+</span> household,</span>
<span id="cb23-559"><a href="#cb23-559" aria-hidden="true" tabindex="-1"></a>  health <span class="sc">~</span> income,</span>
<span id="cb23-560"><a href="#cb23-560" aria-hidden="true" tabindex="-1"></a>  <span class="at">exposure =</span> <span class="st">"net"</span>,</span>
<span id="cb23-561"><a href="#cb23-561" aria-hidden="true" tabindex="-1"></a>  <span class="at">outcome =</span> <span class="st">"malaria_risk"</span>,</span>
<span id="cb23-562"><a href="#cb23-562" aria-hidden="true" tabindex="-1"></a>  <span class="at">coords =</span> <span class="fu">list</span>(</span>
<span id="cb23-563"><a href="#cb23-563" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">c</span>(</span>
<span id="cb23-564"><a href="#cb23-564" aria-hidden="true" tabindex="-1"></a>      <span class="at">malaria_risk =</span> <span class="dv">7</span>,</span>
<span id="cb23-565"><a href="#cb23-565" aria-hidden="true" tabindex="-1"></a>      <span class="at">net =</span> <span class="dv">3</span>,</span>
<span id="cb23-566"><a href="#cb23-566" aria-hidden="true" tabindex="-1"></a>      <span class="at">income =</span> <span class="dv">4</span>,</span>
<span id="cb23-567"><a href="#cb23-567" aria-hidden="true" tabindex="-1"></a>      <span class="at">health =</span> <span class="dv">5</span>,</span>
<span id="cb23-568"><a href="#cb23-568" aria-hidden="true" tabindex="-1"></a>      <span class="at">temperature =</span> <span class="dv">6</span>,</span>
<span id="cb23-569"><a href="#cb23-569" aria-hidden="true" tabindex="-1"></a>      <span class="at">insecticide_resistance =</span> <span class="fl">8.5</span>,</span>
<span id="cb23-570"><a href="#cb23-570" aria-hidden="true" tabindex="-1"></a>      <span class="at">eligible =</span> <span class="dv">2</span>,</span>
<span id="cb23-571"><a href="#cb23-571" aria-hidden="true" tabindex="-1"></a>      <span class="at">household =</span> <span class="dv">1</span>,</span>
<span id="cb23-572"><a href="#cb23-572" aria-hidden="true" tabindex="-1"></a>      <span class="at">genetic_resistance =</span> <span class="fl">8.5</span></span>
<span id="cb23-573"><a href="#cb23-573" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb23-574"><a href="#cb23-574" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">c</span>(</span>
<span id="cb23-575"><a href="#cb23-575" aria-hidden="true" tabindex="-1"></a>      <span class="at">malaria_risk =</span> <span class="dv">2</span>,</span>
<span id="cb23-576"><a href="#cb23-576" aria-hidden="true" tabindex="-1"></a>      <span class="at">net =</span> <span class="dv">2</span>,</span>
<span id="cb23-577"><a href="#cb23-577" aria-hidden="true" tabindex="-1"></a>      <span class="at">income =</span> <span class="dv">3</span>,</span>
<span id="cb23-578"><a href="#cb23-578" aria-hidden="true" tabindex="-1"></a>      <span class="at">health =</span> <span class="dv">1</span>,</span>
<span id="cb23-579"><a href="#cb23-579" aria-hidden="true" tabindex="-1"></a>      <span class="at">temperature =</span> <span class="dv">3</span>,</span>
<span id="cb23-580"><a href="#cb23-580" aria-hidden="true" tabindex="-1"></a>      <span class="at">insecticide_resistance =</span> <span class="dv">2</span>,</span>
<span id="cb23-581"><a href="#cb23-581" aria-hidden="true" tabindex="-1"></a>      <span class="at">eligible =</span> <span class="dv">3</span>,</span>
<span id="cb23-582"><a href="#cb23-582" aria-hidden="true" tabindex="-1"></a>      <span class="at">household =</span> <span class="dv">2</span>,</span>
<span id="cb23-583"><a href="#cb23-583" aria-hidden="true" tabindex="-1"></a>      <span class="at">genetic_resistance =</span> <span class="dv">1</span></span>
<span id="cb23-584"><a href="#cb23-584" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-585"><a href="#cb23-585" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb23-586"><a href="#cb23-586" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb23-587"><a href="#cb23-587" aria-hidden="true" tabindex="-1"></a>    <span class="at">malaria_risk =</span> <span class="st">"Risk of malaria"</span>,</span>
<span id="cb23-588"><a href="#cb23-588" aria-hidden="true" tabindex="-1"></a>    <span class="at">net =</span> <span class="st">"Mosquito net"</span>,</span>
<span id="cb23-589"><a href="#cb23-589" aria-hidden="true" tabindex="-1"></a>    <span class="at">income =</span> <span class="st">"Income"</span>,</span>
<span id="cb23-590"><a href="#cb23-590" aria-hidden="true" tabindex="-1"></a>    <span class="at">health =</span> <span class="st">"Health"</span>,</span>
<span id="cb23-591"><a href="#cb23-591" aria-hidden="true" tabindex="-1"></a>    <span class="at">temperature =</span> <span class="st">"Nighttime temperatures"</span>,</span>
<span id="cb23-592"><a href="#cb23-592" aria-hidden="true" tabindex="-1"></a>    <span class="at">insecticide_resistance =</span> <span class="st">"Insecticide resistance"</span>,</span>
<span id="cb23-593"><a href="#cb23-593" aria-hidden="true" tabindex="-1"></a>    <span class="at">eligible =</span> <span class="st">"Eligible for program"</span>,</span>
<span id="cb23-594"><a href="#cb23-594" aria-hidden="true" tabindex="-1"></a>    <span class="at">household =</span> <span class="st">"Number in household"</span>,</span>
<span id="cb23-595"><a href="#cb23-595" aria-hidden="true" tabindex="-1"></a>    <span class="at">genetic_resistance =</span> <span class="st">"Malaria resistance"</span></span>
<span id="cb23-596"><a href="#cb23-596" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-597"><a href="#cb23-597" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-598"><a href="#cb23-598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-599"><a href="#cb23-599" aria-hidden="true" tabindex="-1"></a>mosquito_dag_full <span class="sc">|&gt;</span></span>
<span id="cb23-600"><a href="#cb23-600" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy_dagitty</span>() <span class="sc">|&gt;</span></span>
<span id="cb23-601"><a href="#cb23-601" aria-hidden="true" tabindex="-1"></a>  <span class="fu">node_status</span>() <span class="sc">|&gt;</span></span>
<span id="cb23-602"><a href="#cb23-602" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb23-603"><a href="#cb23-603" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(x, y, <span class="at">xend =</span> xend, <span class="at">yend =</span> yend, <span class="at">color =</span> status)</span>
<span id="cb23-604"><a href="#cb23-604" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb23-605"><a href="#cb23-605" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_dag_edges</span>() <span class="sc">+</span></span>
<span id="cb23-606"><a href="#cb23-606" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_dag_point</span>() <span class="sc">+</span></span>
<span id="cb23-607"><a href="#cb23-607" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_dag_label_repel</span>() <span class="sc">+</span></span>
<span id="cb23-608"><a href="#cb23-608" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_okabe_ito</span>(<span class="at">na.value =</span> <span class="st">"grey90"</span>) <span class="sc">+</span></span>
<span id="cb23-609"><a href="#cb23-609" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_dag</span>() <span class="sc">+</span></span>
<span id="cb23-610"><a href="#cb23-610" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb23-611"><a href="#cb23-611" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">clip =</span> <span class="st">"off"</span>)</span>
<span id="cb23-612"><a href="#cb23-612" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-613"><a href="#cb23-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-614"><a href="#cb23-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-617"><a href="#cb23-617" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-618"><a href="#cb23-618" aria-hidden="true" tabindex="-1"></a>net_data_full <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/net_data_full.csv"</span>))</span>
<span id="cb23-619"><a href="#cb23-619" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(net_data_full)</span>
<span id="cb23-620"><a href="#cb23-620" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-621"><a href="#cb23-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-622"><a href="#cb23-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-625"><a href="#cb23-625" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-626"><a href="#cb23-626" aria-hidden="true" tabindex="-1"></a>fit_ipw_full <span class="ot">&lt;-</span> <span class="cf">function</span>(split, ...) {</span>
<span id="cb23-627"><a href="#cb23-627" aria-hidden="true" tabindex="-1"></a>  <span class="co"># get bootstrapped data sample with `rsample::analysis()`</span></span>
<span id="cb23-628"><a href="#cb23-628" aria-hidden="true" tabindex="-1"></a>  .df <span class="ot">&lt;-</span> <span class="fu">analysis</span>(split)</span>
<span id="cb23-629"><a href="#cb23-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-630"><a href="#cb23-630" aria-hidden="true" tabindex="-1"></a>  <span class="co"># fit propensity score model</span></span>
<span id="cb23-631"><a href="#cb23-631" aria-hidden="true" tabindex="-1"></a>  propensity_model <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb23-632"><a href="#cb23-632" aria-hidden="true" tabindex="-1"></a>    net <span class="sc">~</span> income <span class="sc">+</span> health <span class="sc">+</span> temperature <span class="sc">+</span> genetic_resistance,,</span>
<span id="cb23-633"><a href="#cb23-633" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> .df,</span>
<span id="cb23-634"><a href="#cb23-634" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="fu">binomial</span>()</span>
<span id="cb23-635"><a href="#cb23-635" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-636"><a href="#cb23-636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-637"><a href="#cb23-637" aria-hidden="true" tabindex="-1"></a>  <span class="co"># calculate inverse probability weights</span></span>
<span id="cb23-638"><a href="#cb23-638" aria-hidden="true" tabindex="-1"></a>  .df <span class="ot">&lt;-</span>  .df <span class="sc">|&gt;</span></span>
<span id="cb23-639"><a href="#cb23-639" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb23-640"><a href="#cb23-640" aria-hidden="true" tabindex="-1"></a>    <span class="at">propensity_score =</span> <span class="fu">predict</span>(propensity_model, <span class="at">type =</span> <span class="st">"response"</span>)</span>
<span id="cb23-641"><a href="#cb23-641" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb23-642"><a href="#cb23-642" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb23-643"><a href="#cb23-643" aria-hidden="true" tabindex="-1"></a>    <span class="at">ipw =</span> <span class="fu">ifelse</span>(net_num <span class="sc">==</span> <span class="dv">1</span>, <span class="dv">1</span> <span class="sc">/</span> propensity_score, <span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> propensity_score))</span>
<span id="cb23-644"><a href="#cb23-644" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-645"><a href="#cb23-645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-646"><a href="#cb23-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-647"><a href="#cb23-647" aria-hidden="true" tabindex="-1"></a>  <span class="co"># fit correctly bootstrapped ipw model</span></span>
<span id="cb23-648"><a href="#cb23-648" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(malaria_risk <span class="sc">~</span> net, <span class="at">data =</span> .df, <span class="at">weights =</span> ipw) <span class="sc">|&gt;</span></span>
<span id="cb23-649"><a href="#cb23-649" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tidy</span>()</span>
<span id="cb23-650"><a href="#cb23-650" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-651"><a href="#cb23-651" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-652"><a href="#cb23-652" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-655"><a href="#cb23-655" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-656"><a href="#cb23-656" aria-hidden="true" tabindex="-1"></a>bootstrapped_net_data_full <span class="ot">&lt;-</span> <span class="fu">bootstraps</span>(</span>
<span id="cb23-657"><a href="#cb23-657" aria-hidden="true" tabindex="-1"></a>  net_data_full,</span>
<span id="cb23-658"><a href="#cb23-658" aria-hidden="true" tabindex="-1"></a>  <span class="at">times =</span> <span class="dv">1000</span>,</span>
<span id="cb23-659"><a href="#cb23-659" aria-hidden="true" tabindex="-1"></a>  <span class="co"># required to calculate CIs later</span></span>
<span id="cb23-660"><a href="#cb23-660" aria-hidden="true" tabindex="-1"></a>  <span class="at">apparent =</span> <span class="cn">TRUE</span></span>
<span id="cb23-661"><a href="#cb23-661" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-662"><a href="#cb23-662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-663"><a href="#cb23-663" aria-hidden="true" tabindex="-1"></a>ipw_results_full <span class="ot">&lt;-</span> bootstrapped_net_data_full <span class="sc">|&gt;</span></span>
<span id="cb23-664"><a href="#cb23-664" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">boot_fits =</span> <span class="fu">map</span>(splits, fit_ipw_full))</span>
<span id="cb23-665"><a href="#cb23-665" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-666"><a href="#cb23-666" aria-hidden="true" tabindex="-1"></a>boot_estimate_full <span class="ot">&lt;-</span> ipw_results_full <span class="sc">|&gt;</span></span>
<span id="cb23-667"><a href="#cb23-667" aria-hidden="true" tabindex="-1"></a>  <span class="co"># calculate T-statistic-based CIs</span></span>
<span id="cb23-668"><a href="#cb23-668" aria-hidden="true" tabindex="-1"></a>  <span class="fu">int_t</span>(boot_fits) <span class="sc">|&gt;</span></span>
<span id="cb23-669"><a href="#cb23-669" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">"netTRUE"</span>)</span>
<span id="cb23-670"><a href="#cb23-670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-671"><a href="#cb23-671" aria-hidden="true" tabindex="-1"></a>boot_estimate_full</span>
<span id="cb23-672"><a href="#cb23-672" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-673"><a href="#cb23-673" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-674"><a href="#cb23-674" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-677"><a href="#cb23-677" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb23-678"><a href="#cb23-678" aria-hidden="true" tabindex="-1"></a>m_bayesian_full <span class="ot">&lt;-</span> <span class="fu">brm</span>(</span>
<span id="cb23-679"><a href="#cb23-679" aria-hidden="true" tabindex="-1"></a>  malaria_risk <span class="sc">~</span> net <span class="sc">+</span> income <span class="sc">+</span> temperature <span class="sc">+</span> health <span class="sc">+</span> genetic_resistance ,</span>
<span id="cb23-680"><a href="#cb23-680" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> net_data_full,</span>
<span id="cb23-681"><a href="#cb23-681" aria-hidden="true" tabindex="-1"></a>  <span class="at">seed =</span> <span class="dv">48</span>,</span>
<span id="cb23-682"><a href="#cb23-682" aria-hidden="true" tabindex="-1"></a>  <span class="at">chains =</span> <span class="dv">4</span>,</span>
<span id="cb23-683"><a href="#cb23-683" aria-hidden="true" tabindex="-1"></a>  <span class="at">iter =</span> <span class="dv">4000</span>,</span>
<span id="cb23-684"><a href="#cb23-684" aria-hidden="true" tabindex="-1"></a>  <span class="at">warmup =</span> <span class="dv">1000</span>,</span>
<span id="cb23-685"><a href="#cb23-685" aria-hidden="true" tabindex="-1"></a>  <span class="at">cores =</span> <span class="dv">4</span>, </span>
<span id="cb23-686"><a href="#cb23-686" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"brms_stan_models/net_2"</span>),</span>
<span id="cb23-687"><a href="#cb23-687" aria-hidden="true" tabindex="-1"></a>  <span class="at">file_refit =</span> <span class="st">"on_change"</span></span>
<span id="cb23-688"><a href="#cb23-688" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-689"><a href="#cb23-689" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-690"><a href="#cb23-690" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-691"><a href="#cb23-691" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m_bayesian_full)</span>
<span id="cb23-692"><a href="#cb23-692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-693"><a href="#cb23-693" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">posterior_summary</span>(m_bayesian_full, <span class="at">variable =</span> <span class="st">"b_netTRUE"</span>), <span class="dv">2</span>)</span>
<span id="cb23-694"><a href="#cb23-694" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-695"><a href="#cb23-695" aria-hidden="true" tabindex="-1"></a>posteriores <span class="ot">&lt;-</span>  <span class="fu">as_tibble</span>(m_bayesian_full)</span>
<span id="cb23-696"><a href="#cb23-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-697"><a href="#cb23-697" aria-hidden="true" tabindex="-1"></a>post_rvars <span class="ot">&lt;-</span> <span class="fu">as_draws_rvars</span>(posteriores)</span>
<span id="cb23-698"><a href="#cb23-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-699"><a href="#cb23-699" aria-hidden="true" tabindex="-1"></a>post_rvars<span class="sc">$</span>b_netTRUE <span class="sc">|&gt;</span></span>
<span id="cb23-700"><a href="#cb23-700" aria-hidden="true" tabindex="-1"></a>  <span class="fu">enframe</span>() <span class="sc">|&gt;</span></span>
<span id="cb23-701"><a href="#cb23-701" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb23-702"><a href="#cb23-702" aria-hidden="true" tabindex="-1"></a>  ggdist<span class="sc">::</span><span class="fu">stat_halfeye</span>(</span>
<span id="cb23-703"><a href="#cb23-703" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>( <span class="at">xdist =</span> value),</span>
<span id="cb23-704"><a href="#cb23-704" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"darkred"</span>,</span>
<span id="cb23-705"><a href="#cb23-705" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.4</span>)  <span class="sc">+</span></span>
<span id="cb23-706"><a href="#cb23-706" aria-hidden="true" tabindex="-1"></a>  ggdist<span class="sc">::</span><span class="fu">theme_ggdist</span>()</span>
<span id="cb23-707"><a href="#cb23-707" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-708"><a href="#cb23-708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-709"><a href="#cb23-709" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>